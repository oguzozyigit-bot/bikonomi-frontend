<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Caynana AI</title>

  <link rel="icon" href="data:," />
  <link rel="stylesheet" href="/css/style.css?v=1" />

  <!-- Google GSI -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>

  <!-- config.js -> GLOBAL -->
  <script type="module">
    import { GOOGLE_CLIENT_ID } from "/js/config.js";
    window.GOOGLE_CLIENT_ID = GOOGLE_CLIENT_ID;
  </script>

  <style>
    :root{
      --gold:#ffb300;
      --pistachio:#bef264;
      --red:#ff5252;

      /* y√ºkseklikler */
      --topbar-h: 64px;
      --input-h: 86px;
      --assistantbar-h: 74px;
      --footer-h: 64px; /* link+brand */
    }

    *{ box-sizing:border-box; -webkit-tap-highlight-color:transparent; outline:none; }
    html,body{ height:100%; }
    body{
      margin:0;
      background:#000;
      color:#eee;
      overflow:hidden;
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
    }

    .mobile-frame{
      position:relative;
      width:100%;
      height:100vh;
      overflow:hidden;
      background:#000;
    }

    /* ===== TOPBAR ===== */
    .topbar{
      position:sticky;
      top:0;
      z-index:3000;
      height: var(--topbar-h);
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 10px 12px;
      border-bottom:1px solid rgba(255,255,255,.06);
      background: rgba(0,0,0,.60);
      backdrop-filter: blur(10px);
    }
    .left-controls{ display:flex; align-items:center; gap:10px; }
    .hamb-btn{
      width:42px; height:42px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      color:#fff;
      font-size:18px;
      cursor:pointer;
    }
    .brand-wrapper{
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:2px;
      min-width:0;
      flex:1;
    }
    .logo-area{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      min-width:0;
    }
    .seesaw-svg{ width:36px; height:18px; }
    .brand-name{
      font-weight:900;
      letter-spacing:.2px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width: 160px;
    }
    .slogan{
      font-size:11px;
      color: rgba(255,255,255,.65);
      font-weight:700;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width: 240px;
    }

    .right-controls{
      display:flex;
      align-items:flex-end;
      min-width:120px;
      justify-content:flex-end;
    }
    .notif-row{
      display:flex;
      flex-direction:column;
      align-items:flex-end;
      gap:6px;
      position:relative;
    }
    .notif-topline{ display:flex; align-items:center; gap:10px; }
    .icon-btn-top{
      width:42px; height:42px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      color:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
    }
    .icon-btn-top svg{ width:22px; height:22px; fill:none; stroke:#fff; stroke-width:2; stroke-linecap:round; stroke-linejoin:round; opacity:.9; }
    .plan-chip{
      font-size:10px;
      font-weight:900;
      padding:6px 10px;
      border-radius:99px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      color: rgba(255,255,255,.78);
      letter-spacing:.3px;
      user-select:none;
    }

    /* ===== MENU OVERLAY ===== */
    .menu-overlay{
      position:fixed;
      inset:0;
      background: rgba(0,0,0,.80);
      z-index:5000;
      opacity:0;
      pointer-events:none;
      transition:.25s;
      display:flex; /* ASLA none yapma */
    }
    .menu-overlay.open{ opacity:1; pointer-events:auto; }
    .menu-sidebar{
      width:280px;
      height:100%;
      background:#111;
      transform: translateX(-100%);
      transition:.28s cubic-bezier(.2,.8,.2,1);
      display:flex;
      flex-direction:column;
      border-right:1px solid #333;
      padding:20px;
      overflow-y:auto;
    }
    .menu-overlay.open .menu-sidebar{ transform: translateX(0); }

    .profile-shortcut-wrap{ margin:10px 0 14px; }
    .profile-shortcut-btn{
      display:flex; align-items:center; gap:12px;
      padding:12px 14px;
      border-radius:18px;
      cursor:pointer;
      user-select:none;
      background: linear-gradient(135deg, rgba(40,25,5,.95), rgba(15,10,5,.98));
      border:1px solid rgba(255,179,0,.35);
      box-shadow: 0 8px 20px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.08);
    }
    #profileShortcutIco{
      width:36px; height:36px; flex:0 0 36px;
      border-radius:50%;
      overflow:hidden;
      display:flex; align-items:center; justify-content:center;
      background: var(--gold);
      border: 2px solid rgba(255,179,0,.6);
      color:#111;
      font-size:18px;
    }
    #profileShortcutIco img{ width:100%; height:100%; object-fit:cover; }
    .profile-shortcut-title{ font-weight:900; color: var(--gold); font-size:13px; text-transform:uppercase; }
    .profile-shortcut-sub{ font-size:13px; font-weight:700; color: rgba(255,255,255,.9); }

    /* ===== CHAT AREA ===== */
    .chat-area{
      position:absolute;
      left:0; right:0;
      top: var(--topbar-h);
      bottom: calc(var(--input-h) + var(--assistantbar-h) + var(--footer-h));
      overflow-y:auto;
      -webkit-overflow-scrolling:touch;
      display:flex;
      flex-direction:column;
      justify-content:flex-end;
      padding: 14px 12px;
      min-height:0;
    }

    /* ===== INPUT DOCK ===== */
    .input-dock{
      position:fixed;
      left:0; right:0;
      bottom: calc(var(--assistantbar-h) + var(--footer-h));
      z-index:3200;
      padding: 10px 10px calc(10px + env(safe-area-inset-bottom));
      background: linear-gradient(to top, rgba(0,0,0,.92), rgba(0,0,0,.45));
      border-top: 1px solid rgba(255,255,255,.06);
      backdrop-filter: blur(10px);
    }
    .dock-inner{
      display:flex;
      align-items:flex-end;
      gap:10px;
      max-width: 920px;
      margin: 0 auto;
    }
    .icon-btn, .send-btn{
      width:44px; height:44px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      color:#fff;
      cursor:pointer;
      display:flex; align-items:center; justify-content:center;
    }
    .icon-btn svg, .send-btn svg{
      width:22px; height:22px;
      fill:none; stroke:#fff; stroke-width:2;
      stroke-linecap:round; stroke-linejoin:round;
      opacity:.95;
    }
    #msgInput{
      flex:1;
      min-height:44px;
      max-height:120px;
      resize:none;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      color:#fff;
      padding: 12px 12px;
      font-size:14px;
      line-height:18px;
    }
    #msgInput::placeholder{ color: rgba(255,255,255,.45); }

    /* ===== ASSISTANT BAR (KAYAN) ===== */
    .assistant-bar{
      position:fixed;
      left:0; right:0;
      bottom: var(--footer-h);
      height: var(--assistantbar-h);
      z-index:2900;

      display:flex;
      align-items:center;
      gap: 12px;
      padding: 10px 14px;

      overflow-x:auto;
      -webkit-overflow-scrolling:touch;
      scrollbar-width:none;

      background: rgba(0,0,0,.92);
      border-top: 1px solid rgba(255,255,255,.06);
    }
    .assistant-bar::-webkit-scrollbar{ display:none; }

    .assistant-item{
      flex: 0 0 auto;
      min-width: 76px;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap: 6px;
      padding: 10px 12px;
      border-radius: 16px;
      color: rgba(255,255,255,.72);
      border: 1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.03);
      cursor:pointer;
      user-select:none;
    }
    .assistant-item .ico{ font-size:20px; line-height:1; }
    .assistant-item .lbl{ font-size:10px; font-weight:900; text-transform:uppercase; opacity:.95; white-space:nowrap; }

    /* ===== FOOTER ===== */
    .footer-fixed{
      position:fixed;
      left:0; right:0;
      bottom:0;
      height: var(--footer-h);
      z-index:2800;
      background: rgba(0,0,0,.92);
      border-top: 1px solid rgba(255,255,255,.06);
      display:flex;
      flex-direction:column;
      justify-content:center;
      gap:6px;
      padding: 8px 12px calc(8px + env(safe-area-inset-bottom));
    }
    .footer-links{
      display:flex;
      justify-content:center;
      gap: 16px;
      font-size:12px;
      font-weight:900;
      overflow-x:auto;
      -webkit-overflow-scrolling:touch;
      scrollbar-width:none;
    }
    .footer-links::-webkit-scrollbar{ display:none; }
    .footer-links a{ color: rgba(255,255,255,.70); text-decoration:none; white-space:nowrap; }
    .footer-brand{
      text-align:center;
      font-size:11px;
      font-weight:900;
      color: rgba(255,255,255,.55);
    }

    /* ===== LOGIN OVERLAY ===== */
    .full-overlay{
      position:fixed;
      inset:0;
      width:100vw;
      height:100vh;
      background: rgba(0,0,0,.92);
      z-index:9900;
      display:flex;
      align-items:center;
      justify-content:center;
      opacity:0;
      pointer-events:none;
      transition: opacity .25s ease;
    }
    .full-overlay.active{ opacity:1; pointer-events:auto; }

    .login-card{
      width:min(420px, 92vw);
      padding:28px 26px 22px;
      border-radius:26px;
      background:
        radial-gradient(1200px 400px at 0% 0%, rgba(255,179,0,.10), transparent 60%),
        radial-gradient(1200px 400px at 100% 0%, rgba(190,242,100,.08), transparent 60%),
        #0e0e0e;
      border:1px solid rgba(255,255,255,.12);
      box-shadow:0 40px 120px rgba(0,0,0,.75);
      text-align:center;
      position:relative;
    }

    .google-area{ position:relative; width:100%; margin-top:16px; }
    #googleLoginBtn{
      width:100%;
      height:52px;
      border-radius:16px;
      border:none;
      font-weight:900;
      font-size:15px;
      background:linear-gradient(180deg,#ffffff,#f1f1f1);
      color:#111;
      display:flex; align-items:center; justify-content:center; gap:10px;
      box-shadow:0 12px 30px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.8);
      position:relative;
      z-index:1;
    }
    #googleLoginBtn::before{
      content:"";
      width:20px; height:20px;
      background:url("https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg") no-repeat center/contain;
      display:inline-block;
    }
    #googleBtnWrap{
      position:absolute;
      inset:0;
      width:100%;
      height:52px;
      z-index:9999;
      opacity:0.01;
      cursor:pointer;
    }
    #googleBtnWrap iframe{ width:100%!important; height:100%!important; cursor:pointer!important; }

    #appleLoginBtn{
      width:100%;
      height:50px;
      margin-top:10px;
      border-radius:16px;
      background:rgba(255,255,255,.06);
      color:rgba(255,255,255,.55);
      border:1px solid rgba(255,255,255,.12);
      font-weight:800;
    }
    #appleLoginBtn::before{ content:"Ô£ø "; }

    .trust-links-clean{
      margin-top:16px;
      display:flex;
      gap:14px;
      justify-content:center;
      font-size:12px;
      opacity:.65;
      flex-wrap:wrap;
    }
    .trust-links-clean a{ color:rgba(255,255,255,.65); text-decoration:none; }
    .login-footer{
      margin-top:12px;
      font-size:11px;
      font-weight:900;
      opacity:.55;
    }
  </style>
</head>

<body>
<div class="mobile-frame" id="mobileFrame">

  <!-- TOPBAR -->
  <div class="topbar">
    <div class="left-controls">
      <button class="hamb-btn" id="hambBtn">‚ò∞</button>
    </div>

    <div class="brand-wrapper" id="brandWrapper">
      <div class="logo-area">
        <svg class="seesaw-svg" viewBox="0 0 40 20" aria-hidden="true">
          <g class="seesaw-bar" id="seesawBar">
            <line x1="0" y1="8" x2="40" y2="8" stroke="#ccc" stroke-width="2" stroke-linecap="round"/>
            <circle cx="3" cy="5" r="3" fill="#bef264"/>
            <circle cx="37" cy="5" r="3" fill="#ffb300" id="orangeBall"/>
          </g>
          <polygon points="17,14 23,14 20,8" fill="none" stroke="#666" stroke-width="1.5"/>
        </svg>
        <div class="brand-name">Caynana AI</div>
      </div>
      <div class="slogan">Yapay Zek√¢nƒ±n Geleneksel Aklƒ±</div>
    </div>

    <div class="right-controls">
      <div class="notif-row">
        <div class="notif-topline">
          <button class="icon-btn-top" id="notifBtn" aria-label="Bildirimler">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
              <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
            </svg>
            <div class="badge" id="notifBadge"></div>
          </button>
          <div id="planChip" class="plan-chip">FREE</div>
        </div>
      </div>
    </div>
  </div>

  <!-- HAMBURGER MENU -->
  <div class="menu-overlay" id="menuOverlay">
    <div class="menu-sidebar">
      <button class="new-chat-btn" id="newChatBtn"><span>+</span> YENƒ∞ SOHBET BA≈ûLAT</button>

      <div class="profile-shortcut-wrap" id="profileShortcutMount">
        <div class="profile-shortcut-btn" id="profileShortcutBtn" onclick="location.href='/pages/profil.html'">
          <div class="profile-shortcut-ico" id="profileShortcutIco">üë§</div>
          <div class="profile-shortcut-text">
            <div class="profile-shortcut-title">Profil D√ºzenle</div>
            <div class="profile-shortcut-sub" id="profileShortcutName">‚Äî</div>
          </div>
        </div>
      </div>

      <div class="menu-block asistan">
        <div class="block-head">Asistan</div>
        <div class="menu-grid" id="menuAsistan"></div>
      </div>

      <div class="menu-block astro">
        <div class="block-head">Astro AI</div>
        <div class="menu-grid" id="menuAstro"></div>
      </div>

      <div class="menu-block kurumsal">
        <div class="block-head">Kurumsal</div>
        <div class="menu-grid" id="menuKurumsal"></div>
      </div>

      <div class="menu-footer-actions">
        <a class="action-link" id="logoutBtn">üõ°Ô∏è G√ºvenli √áƒ±kƒ±≈ü</a>
        <a class="action-link delete-acc" id="deleteAccountBtn">üóëÔ∏è Hesabƒ±mƒ± Sil</a>
        <div class="footer-copy">@CaynanaAI By Ozyigit's 2026</div>
      </div>
    </div>
  </div>

  <!-- CHAT -->
  <div class="chat-area" id="chat"></div>

  <!-- INPUT -->
  <div class="input-dock">
    <div class="dock-inner">
      <button class="icon-btn" id="camBtn" aria-label="Kamera">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path>
          <circle cx="12" cy="13" r="4"></circle>
        </svg>
      </button>

      <textarea id="msgInput" rows="1" placeholder="Ne lazƒ±m evladƒ±m?" spellcheck="false"></textarea>

      <button class="icon-btn" id="micBtn" aria-label="Mikrofon">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
          <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
          <line x1="12" y1="19" x2="12" y2="23"></line>
          <line x1="8" y1="23" x2="16" y2="23"></line>
        </svg>
      </button>

      <button class="send-btn" id="sendBtn" aria-label="G√∂nder">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M22 2L11 13"></path>
          <path d="M22 2L15 22L11 13L2 9L22 2Z"></path>
        </svg>
      </button>
    </div>
  </div>

  <!-- ASSISTANT BAR -->
  <div class="assistant-bar" id="assistantBar">
    <div class="assistant-item" data-go="/"><div class="ico">üí¨</div><div class="lbl">Sohbet</div></div>
    <div class="assistant-item" data-go="/pages/diyet.html"><div class="ico">ü•ó</div><div class="lbl">Diyet</div></div>
    <div class="assistant-item" data-go="/pages/saglik.html"><div class="ico">‚ù§Ô∏è</div><div class="lbl">Saƒülƒ±k</div></div>
    <div class="assistant-item" data-go="/pages/astro.html"><div class="ico">‚ôà</div><div class="lbl">Astro</div></div>
    <div class="assistant-item" data-go="/pages/fal.html"><div class="ico">‚òï</div><div class="lbl">Fal</div></div>
    <div class="assistant-item" data-go="/pages/alisveris.html"><div class="ico">üõçÔ∏è</div><div class="lbl">Alƒ±≈üveri≈ü</div></div>
    <div class="assistant-item" data-go="/pages/tercuman.html"><div class="ico">üåç</div><div class="lbl">Terc√ºman</div></div>
  </div>

  <!-- FOOTER -->
  <div class="footer-fixed">
    <div class="footer-links">
      <a href="/pages/hakkimizda.html">Hakkƒ±mƒ±zda</a>
      <a href="/pages/sss.html">SSS</a>
      <a href="/pages/gizlilik.html">Gizlilik</a>
      <a href="/pages/iletisim.html">ƒ∞leti≈üim</a>
    </div>
    <div class="footer-brand">@CaynanaAI By Ozyigit's 2026</div>
  </div>

</div>

<!-- LOGIN OVERLAY -->
<div class="full-overlay active" id="loginOverlay">
  <div class="login-card">
    <svg viewBox="0 0 220 70" style="width:70px;height:34px;">
      <line x1="20" y1="30" x2="200" y2="30" stroke="#ccc" stroke-width="6"/>
      <circle cx="30" cy="20" r="10" fill="#bef264"/>
      <circle cx="190" cy="20" r="10" fill="#ffb300"/>
    </svg>

    <div style="font-size:24px;font-weight:1000;">Caynana.AI</div>
    <div style="opacity:.75;font-weight:800;font-size:12px;">Yapay Zek√¢nƒ±n Geleneksel Aklƒ±</div>
    <div style="margin-top:6px;font-weight:900;">√úcretsiz √ºyelik i√ßin giri≈ü yap</div>

    <div class="google-area">
      <button id="googleLoginBtn" type="button">Google ile Devam Et</button>
      <div id="googleBtnWrap"></div>
    </div>

    <button id="appleLoginBtn" type="button">Apple ile Devam Et</button>

    <div class="trust-links-clean">
      <a href="/pages/hakkimizda.html">Hakkƒ±mƒ±zda</a>
      <a href="/pages/sss.html">SSS</a>
      <a href="/pages/gizlilik.html">Gizlilik</a>
      <a href="/pages/iletisim.html">ƒ∞leti≈üim</a>
    </div>

    <div class="login-footer">@CaynanaAI By Ozyigit's 2026</div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script type="module" src="/js/main.js"></script>

<script>
document.addEventListener("DOMContentLoaded", () => {

  // Hamburger
  const hambBtn = document.getElementById("hambBtn");
  const menuOverlay = document.getElementById("menuOverlay");
  if(hambBtn && menuOverlay){
    hambBtn.addEventListener("click", ()=> menuOverlay.classList.add("open"));
    menuOverlay.addEventListener("click", (e)=> { if(e.target === menuOverlay) menuOverlay.classList.remove("open"); });
  }

  // Alt bar navigation
  document.querySelectorAll(".assistant-item").forEach(el=>{
    el.addEventListener("click", ()=>{
      const go = el.getAttribute("data-go");
      if(go) location.href = go;
    });
  });

  // Profile shortcut avatar/name
  function paintProfileShortcut(){
    try{
      const u = JSON.parse(localStorage.getItem("caynana_user_v1") || "{}");
      const pic = u.picture || u.avatar || u.avatar_url;
      const name = u.fullname || u.name || "‚Äî";
      const ico = document.getElementById("profileShortcutIco");
      if(ico && pic) ico.innerHTML = `<img src="${pic}" alt="avatar">`;
      const nm = document.getElementById("profileShortcutName");
      if(nm) nm.textContent = name;
    }catch{}
  }

  // Login overlay hide/show
  const loginOverlay = document.getElementById("loginOverlay");

  // Eƒüer zaten giri≈ü varsa overlay kapat
  if(localStorage.getItem("caynana_user_v1")){
    if(loginOverlay) loginOverlay.classList.remove("active");
    paintProfileShortcut();
  }

  // Apple
  const apple = document.getElementById("appleLoginBtn");
  if(apple) apple.addEventListener("click", ()=> alert("Apple giri≈üi yakƒ±nda! ≈ûimdilik Google'la gel."));

  // Google init
  const GOOGLE_CLIENT_ID = window.GOOGLE_CLIENT_ID;
  if(!GOOGLE_CLIENT_ID){
    console.error("GOOGLE_CLIENT_ID yok (config.js okunmadƒ±).");
    return;
  }

  function parseJwt(token){
    try{
      const base64Url = token.split(".")[1];
      const base64 = base64Url.replace(/-/g,"+").replace(/_/g,"/");
      const jsonPayload = decodeURIComponent(atob(base64).split("").map(c => "%" + ("00" + c.charCodeAt(0).toString(16)).slice(-2)).join(""));
      return JSON.parse(jsonPayload);
    }catch{ return {}; }
  }

  function onGoogle(response){
    if(!response.credential) return;
    const p = parseJwt(response.credential);
    localStorage.setItem("caynana_user_v1", JSON.stringify({
      fullname: p.name || "",
      email: p.email || "",
      picture: p.picture || ""
    }));
    if(loginOverlay) loginOverlay.classList.remove("active");
    paintProfileShortcut();
  }

  const poll = setInterval(()=>{
    if(window.google && google.accounts && google.accounts.id){
      clearInterval(poll);
      google.accounts.id.initialize({
        client_id: GOOGLE_CLIENT_ID,
        callback: onGoogle,
        auto_select:false,
        cancel_on_tap_outside:false
      });
      const wrap = document.getElementById("googleBtnWrap");
      if(wrap){
        google.accounts.id.renderButton(wrap, {
          type:"standard",
          theme:"outline",
          size:"large",
          width: 420,
          text:"signin_with",
          logo_alignment:"left"
        });
      }
    }
  }, 100);

});
</script>

</body>
</html>

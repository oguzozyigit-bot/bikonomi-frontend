<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Caynana AI v5.2 FINAL</title>
  <link rel="icon" href="data:,">
  <link rel="stylesheet" href="/css/style.css?v=1">
  <script src="https://accounts.google.com/gsi/client" async defer></script>

  <style>
    /* =========================================================
       âœ… TOPBAR SIKIÅMA FIX
       ========================================================= */
    #profileBtn{ display:none !important; } /* Ã¼st profil ikonu yok */

    .right-controls{
      display:flex !important;
      flex-direction:column !important;
      align-items:flex-end !important;
      gap:6px !important;
      width:auto !important;
    }
    .notif-row{
      display:flex !important;
      flex-direction:column !important;
      align-items:flex-end !important;
      gap:6px !important;
      position:relative !important;
    }
    .notif-topline{
      display:flex !important;
      align-items:center !important;
      gap:10px !important;
    }
    #notifBtn{ display:flex !important; align-items:center !important; padding:6px !important; }

    .plan-chip{
      font-size:10px !important;
      font-weight:900 !important;
      letter-spacing:.7px !important;
      padding:5px 10px !important;
      border-radius:999px !important;
      border:1px solid rgba(255,255,255,.10) !important;
      background: rgba(255,255,255,.04) !important;
      color: rgba(255,255,255,.75) !important;
      line-height:1 !important;
      user-select:none !important;
      text-transform:uppercase !important;
      white-space:nowrap !important;
    }

    /* SAMÄ°MÄ°YET -> S.P */
    .yp-chip .yp-label{ font-size:0 !important; }
    .yp-chip .yp-label::after{
      content:"S.P" !important;
      font-size:10px !important;
      font-weight:900 !important;
      letter-spacing:.6px !important;
      color: rgba(255,255,255,.75) !important;
    }

    /* Logo biraz bÃ¼yÃ¼sÃ¼n + yazÄ±ya yapÄ±ÅŸmasÄ±n */
    .logo-area{ gap:10px !important; }
    .seesaw-svg{ width:36px !important; height:18px !important; }

    /* =========================================================
       âœ… CHAT: boÅŸken dock kaymasÄ±n (senin mevcut kurgun)
       ========================================================= */
    .chat-area{
      display:flex !important;
      flex-direction:column !important;
      justify-content:flex-end !important;
      padding-bottom:78px !important;
      min-height:0 !important;
    }
    .chat-area:empty::before{ display:none !important; }

    /* INPUT: focus kare Ã§erÃ§eve yok */
    #msgInput:focus, textarea:focus{
      outline:none !important;
      box-shadow:none !important;
    }

    /* =========================================================
       âœ… MENU: Profil kartÄ± 3D turuncu buton (kÃ¼Ã§Ã¼k avatar + ad soyad)
       ========================================================= */
    .profile-shortcut-wrap{ margin:10px 0 10px; }
    .profile-shortcut-btn{
      display:flex;
      align-items:center;
      gap:12px;
      padding:12px 12px;
      border-radius:18px;
      cursor:pointer;
      user-select:none;

      background: linear-gradient(180deg, rgba(255,179,0,.22), rgba(0,0,0,0));
      border: 1px solid rgba(255,179,0,.55);
      box-shadow: 0 16px 28px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.14);
      transition: transform .12s ease, filter .12s ease;
    }
    .profile-shortcut-btn:active{ transform: translateY(1px); filter: brightness(.98); }

    /* ikon kutusu: kÃ¼Ã§Ã¼k, turuncu, 3D */
    #profileShortcutIco{
      width:36px !important;
      height:36px !important;
      border-radius:14px !important;
      flex:0 0 36px !important;
      overflow:hidden !important;
      display:flex !important;
      align-items:center !important;
      justify-content:center !important;

      background:#ffb300 !important;
      border:1px solid rgba(255,179,0,.65) !important;
      box-shadow: inset 0 1px 0 rgba(255,255,255,.18) !important;
      color:#111 !important;
      font-size:18px !important;
      position:relative !important;
    }

    /* âœ… + rozeti KALKTI */
    #profileShortcutIco::after{ display:none !important; content:none !important; }

    /* avatar gelirse ikon iÃ§ine bas (bÃ¼yÃ¼k foto yok!) */
    #profileShortcutIco img{
      width:100% !important;
      height:100% !important;
      object-fit:cover !important;
      display:block !important;
    }

    .profile-shortcut-text{ min-width:0 !important; }
    .profile-shortcut-title{
      font-weight:950 !important;
      color:#ffb300 !important;
      line-height:1.05 !important;
      font-size:15px !important;
    }
    .profile-shortcut-sub{
      margin-top:2px !important;
      font-size:12px !important;
      color: rgba(255,255,255,.72) !important;
      white-space:nowrap !important;
      overflow:hidden !important;
      text-overflow:ellipsis !important;
      max-width:220px !important;
    }

    /* =========================================================
       âœ… HISTORY: kibar Ã§Ã¶p (tek satÄ±r) + eski kÄ±rmÄ±zÄ± Ã§Ã¶p yok
       ========================================================= */
    .history-del{
      display:flex !important;
      width:34px !important;
      height:34px !important;
      border-radius:12px !important;
      align-items:center !important;
      justify-content:center !important;
      border:1px solid rgba(255,255,255,.10) !important;
      background: rgba(255,255,255,.04) !important;
    }
    .del-chat{ display:none !important; } /* eski tip kÄ±rmÄ±zÄ± Ã§Ã¶p varsa gizle */

    /* =========================================================
       âœ… MENÃœ Ä°KONLARI GERÄ°: style.css glyph sistemini override
       ========================================================= */
    .menu-action .ico{
      font-size:18px !important;
      line-height:1 !important;
      color:inherit !important;
    }
    .menu-action .ico::before{
      content:none !important;
    }

    /* Kurumsal iÃ§indeki profil tekrarÄ±nÄ± gizle (profil Ã¼stte turuncu kart zaten var) */
    #menuKurumsal .menu-action[data-action="profile"]{ display:none !important; }

    /* =========================================================
       âœ… LOGIN: linkler mor/mavi olmasÄ±n + sadece 4 link
       ========================================================= */
    #loginOverlay .trust-links-clean a,
    #loginOverlay .trust-links-clean a:visited,
    #loginOverlay .trust-links-clean a:hover,
    #loginOverlay .trust-links-clean a:active{
      color: rgba(255,255,255,.55) !important;
      text-decoration:none !important;
    }

    /* Google hazÄ±r... yazÄ±sÄ± GÄ°ZLE */
    #loginHint{ display:none !important; }

    /* =========================================================
       âœ… OVERLAY: saÄŸda panel kalma / iki overlay aynÄ± anda gÃ¶rÃ¼nme FIX
       ========================================================= */
    .full-overlay{
      position:fixed !important;
      inset:0 !important;
      width:100vw !important;
      height:100vh !important;
      left:0 !important;
      top:0 !important;
      right:0 !important;
      bottom:0 !important;
      z-index:9000 !important;
    }
    #termsOverlay{ z-index:9100 !important; }
    #pageOverlay{ z-index:9200 !important; }
  </style>
</head>

<body>

<div class="mobile-frame" id="mobileFrame">
  <div class="topbar">
    <div class="left-controls">
      <button class="hamb-btn" id="hambBtn">â˜°</button>
    </div>

    <div class="brand-wrapper" id="brandWrapper">
      <div class="logo-area">
        <svg class="seesaw-svg" viewBox="0 0 40 20">
          <g class="seesaw-bar" id="seesawBar">
            <line x1="0" y1="8" x2="40" y2="8" stroke="#ccc" stroke-width="2" stroke-linecap="round" />
            <circle cx="3" cy="5" r="3" fill="#bef264" />
            <circle cx="37" cy="5" r="3" fill="#ffb300" id="orangeBall" />
          </g>
          <polygon points="17,14 23,14 20,8" fill="none" stroke="#666" stroke-width="1.5" />
        </svg>
        <div class="brand-name">Caynana AI</div>
      </div>
      <div class="slogan">Yapay ZekÃ¢nÄ±n Geleneksel AklÄ±</div>
    </div>

    <div class="right-controls">
      <div class="notif-row">
        <!-- 1. satÄ±r: zil + FREE -->
        <div class="notif-topline">
          <button class="icon-btn-top" id="notifBtn" aria-label="Bildirimler">
            <svg viewBox="0 0 24 24">
              <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
              <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
            </svg>
            <div class="badge" id="notifBadge"></div>
          </button>

          <div id="planChip" class="plan-chip">FREE</div>
        </div>

        <div class="notification-dropdown" id="notifDropdown">
          <div class="notif-header">Bildirimler</div>
          <div class="notif-list" id="notifList"></div>
        </div>

        <!-- 2. satÄ±r: S.P chip -->
        <div class="yp-chip">
          <div class="yp-label">SAMÄ°MÄ°YET</div>
          <div class="yp-meter"><div class="yp-fill" id="ypFill"></div></div>
          <div class="yp-num" id="ypNum">19%</div>
        </div>

        <!-- Ã¼st profil butonu (CSS ile kapalÄ±) -->
        <button class="icon-btn-top" id="profileBtn" aria-label="Profil">
          <svg viewBox="0 0 24 24">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- MENU -->
  <div class="menu-overlay" id="menuOverlay">
    <div class="menu-sidebar">
      <button class="new-chat-btn" id="newChatBtn"><span>+</span> YENÄ° SOHBET BAÅLAT</button>

      <!-- âœ… Turuncu 3D Profil Butonu -->
      <div class="profile-shortcut-wrap" id="profileShortcutMount">
        <div class="profile-shortcut-btn" id="profileShortcutBtn">
          <div class="profile-shortcut-ico" id="profileShortcutIco">ğŸ‘¤</div>
          <div class="profile-shortcut-text">
            <div class="profile-shortcut-title">Profil DÃ¼zenle</div>
            <div class="profile-shortcut-sub" id="profileShortcutName">â€”</div>
          </div>
        </div>
      </div>

      <div class="section-title" id="historyTitle">GEÃ‡MÄ°Å SOHBETLER</div>
      <div class="history-list" id="historyList"></div>

      <div class="menu-block asistan">
        <div class="block-head">Asistan</div>
        <div class="menu-grid" id="menuAsistan"></div>
      </div>

      <div class="menu-block astro">
        <div class="block-head">Astro AI</div>
        <div class="menu-grid" id="menuAstro"></div>
      </div>

      <div class="menu-block kurumsal">
        <div class="block-head">Kurumsal</div>
        <div class="menu-grid" id="menuKurumsal"></div>
      </div>

      <div class="menu-footer-actions">
        <a class="action-link" id="logoutBtn">ğŸ›¡ï¸ GÃ¼venli Ã‡Ä±kÄ±ÅŸ</a>
        <a class="action-link delete-acc" id="deleteAccountBtn">ğŸ—‘ï¸ HesabÄ±mÄ± Sil</a>
        <div class="footer-copy">@CaynanaAI By Ozyigit's 2026</div>
      </div>
    </div>
  </div>

  <!-- CHAT -->
  <div class="chat-area" id="chat"></div>

  <!-- DOCK -->
  <div class="input-dock">
    <div class="dock-inner">
      <button class="icon-btn" id="camBtn" aria-label="Kamera">
        <svg viewBox="0 0 24 24">
          <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path>
          <circle cx="12" cy="13" r="4"></circle>
        </svg>
      </button>
      <textarea id="msgInput" rows="1" placeholder="Ne lazÄ±m evladÄ±m?" spellcheck="false"></textarea>
      <button class="icon-btn" id="micBtn" aria-label="Mikrofon">
        <svg viewBox="0 0 24 24">
          <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
          <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
          <line x1="12" y1="19" x2="12" y2="23"></line>
          <line x1="8" y1="23" x2="16" y2="23"></line>
        </svg>
      </button>
      <button class="send-btn" id="sendBtn" aria-label="GÃ¶nder">
        <svg viewBox="0 0 24 24">
          <path d="M22 2L11 13"></path>
          <path d="M22 2L15 22L11 13L2 9L22 2Z"></path>
        </svg>
      </button>
    </div>
  </div>

  <!-- FOOTER -->
  <div class="footer-container">
    <div class="footer-links">
      <a href="/pages/hakkimizda.html">HakkÄ±mÄ±zda</a>
      <a href="/pages/sss.html">SSS</a>
      <a href="/pages/gizlilik.html">Gizlilik</a>
      <a href="/pages/iletisim.html">Ä°letiÅŸim</a>
    </div>
    <div class="footer-brand">@CaynanaAI By Ozyigits 2026</div>
  </div>
</div>

<!-- PAGE OVERLAY -->
<div class="full-overlay" id="pageOverlay">
  <div class="login-card" style="max-width:90%; max-height:90%; overflow-y:auto;">
    <div style="display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #333; padding-bottom:10px; margin-bottom:10px;">
      <div id="pageTitle" style="font-weight:800; color:#fff;">BaÅŸlÄ±k</div>
      <button id="closePageBtn" style="background:none; border:none; color:#ff5252; font-size:20px;">&times;</button>
    </div>
    <div id="pageContent" style="text-align:left; font-size:13px; color:#ddd;"></div>
  </div>
</div>

<!-- LOGIN -->
<div class="full-overlay active" id="loginOverlay">
  <div class="login-card login-premium">

    <div class="login-seesaw-wrap" aria-hidden="true">
      <svg class="login-seesaw" viewBox="0 0 220 70">
        <g class="login-seesaw-bar">
          <line x1="20" y1="30" x2="200" y2="30" stroke="rgba(255,255,255,.65)" stroke-width="6" stroke-linecap="round"/>
          <circle cx="30" cy="20" r="10" fill="#bef264"/>
          <circle cx="190" cy="20" r="10" fill="#ffb300"/>
        </g>
        <polygon points="105,55 115,55 110,30" fill="none" stroke="rgba(255,255,255,.35)" stroke-width="3"/>
      </svg>
    </div>

    <div class="brand-name" style="font-size:24px; margin:6px 0 4px;">Caynana.AI</div>
    <div class="login-slogan">Yapay ZekÃ¢nÄ±n Geleneksel AklÄ±</div>

    <div class="login-sub"><b>Ãœcretsiz Ã¼yelik</b> iÃ§in lÃ¼tfen giriÅŸ yapÄ±n.</div>

    <button class="auth-btn google" id="googleLoginBtn" type="button">Google ile Devam Et</button>
    <div id="googleBtnWrap" style="margin-top:10px;"></div>

    <!-- âœ… Apple buton metni dÃ¼zeltildi -->
    <button class="auth-btn apple" id="appleLoginBtn" type="button">Apple ile Devam Et</button>

    <!-- âœ… Login linkleri sade (SÃ¶zleÅŸme/Ãœyelik yok) -->
    <div class="trust-links trust-links-clean">
      <a href="/pages/hakkimizda.html">HakkÄ±mÄ±zda</a>
      <a href="/pages/sss.html">SSS</a>
      <a href="/pages/gizlilik.html">Gizlilik</a>
      <a href="/pages/iletisim.html">Ä°letiÅŸim</a>
    </div>

    <div class="login-footer">@CaynanaAI By Ozyigit's 2026</div>
    <div id="loginHint" class="login-hint">Servisler yÃ¼kleniyor...</div>
  </div>
</div>

<!-- TERMS -->
<div class="full-overlay" id="termsOverlay">
  <div class="login-card login-premium">
    <div class="terms-head">
      <div class="brand-name">SÃ¶zleÅŸme</div>
      <button id="closeTermsBtn" class="x-btn" aria-label="Kapat">Ã—</button>
    </div>

    <div class="terms-frame-wrap">
      <iframe id="termsFrame" src="/pages/sozlesme.html" title="KullanÄ±cÄ± SÃ¶zleÅŸmesi"></iframe>
    </div>

    <div class="agreement-box">
      <input type="checkbox" id="termsCheck">
      <label for="termsCheck">OnaylÄ±yorum.</label>
    </div>

    <button class="auth-btn" id="termsAcceptBtn" type="button">Onayla ve Gir</button>
    <div class="login-footer">@CaynanaAI By Ozyigit's 2026</div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
  window.CAYNANA_TYPE_SPEED = 28;
</script>

<script type="module" src="js/main.js"></script>

<!-- âœ… Apple click mesajÄ± (istediÄŸin metin) -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const a = document.getElementById("appleLoginBtn");
    if(a){
      a.addEventListener("click", () => {
        alert("Apple giriÅŸi hazÄ±rlanÄ±yor. Google ile giriÅŸ yapabilirsiniz.\nÃœyelik Ã¼cretsizdir.");
      });
    }
  });
</script>

<!-- âœ… Profil kÄ±sayol: avatar + ad soyad doldur (senin STORAGE_KEY ile) -->
<script>
  (function(){
    const STORAGE_KEY = "caynana_user_v1";
    function safeJson(s, fb){ try{return JSON.parse(s||"")}catch(e){return fb} }

    function paintProfileShortcut(){
      try{
        const u = safeJson(localStorage.getItem(STORAGE_KEY), {});
        const pic = (u.picture || u.avatar || u.avatar_url || u.photo_url || "").trim();
        const full = (u.fullname || u.name || u.display_name || "").trim();

        const ico = document.getElementById("profileShortcutIco");
        if(ico){
          ico.innerHTML = pic ? `<img src="${pic}" alt="avatar">` : "ğŸ‘¤";
        }
        const nm = document.getElementById("profileShortcutName");
        if(nm) nm.textContent = full || "â€”";
      }catch(e){}
    }

    document.addEventListener("DOMContentLoaded", ()=>{
      paintProfileShortcut();
      const pbtn = document.getElementById("profileShortcutBtn");
      if(pbtn) pbtn.addEventListener("click", ()=> location.href="/pages/profil.html");
    });
  })();
</script>

<!-- âœ… Overlay normalize: logout/geri dÃ¶nÃ¼ÅŸte saÄŸda sÃ¶zleÅŸme paneli kalmasÄ±n -->
<script>
  (function(){
    function hideAllOverlays(){
      ["termsOverlay","pageOverlay","menuOverlay"].forEach(id=>{
        const el = document.getElementById(id);
        if(!el) return;
        el.classList.remove("active","open","show");
        el.style.display = "none";
      });
      const dd = document.getElementById("notifDropdown");
      if(dd) dd.classList.remove("show");
    }

    function normalizeLoginState(){
      const lo = document.getElementById("loginOverlay");
      if(!lo) return;
      const isActive = lo.classList.contains("active") || (lo.style.display === "flex");
      if(isActive) hideAllOverlays();
    }

    document.addEventListener("DOMContentLoaded", normalizeLoginState);
    window.addEventListener("pageshow", normalizeLoginState);

    document.addEventListener("click", (e)=>{
      const t = e.target;
      if(t && (t.id === "logoutBtn" || (t.closest && t.closest("#logoutBtn")))){
        hideAllOverlays();
      }
    }, true);
  })();
</script>

</body>
</html>

<!-- FILE: /index.html (FULL - PURE BLACK + FIXED INPUT + UPWARD CHAT + CLIP UNDER APPLE + SEESAW + EYES READ TEXT) -->
<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Caynana AI - Giriş</title>

  <link rel="icon" href="data:," />
  <link rel="stylesheet" href="/css/style.css?v=2" />

  <!-- Google GSI -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>

  <style>
    :root{ --gold:#ffb300; --pistachio:#bef264; --red:#ff5252; }

    /* ✅ Zemin tam siyah */
    html, body{ background:#000 !important; }
    .mobile-frame{ background:#000 !important; }

    /* Üst bar sabit */
    .topbar{ position: sticky; top:0; z-index:3000; background: rgba(0,0,0,.92) !important; }
    .topbar .left-controls, .topbar .right-controls{ width:80px; }
    .topbar .brand-wrapper{ margin:0 auto; text-align:center; }

    /* Stage */
    .login-stage{
      position: relative;
      flex: 1 1 auto;
      min-height: 0;
      overflow: hidden;
      padding: 18px 16px 110px; /* footer + input */
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:flex-start;
      gap: 14px;
      background:#000;
    }

    /* ===== GÖZLER (ORTALI, ZEMİN YOK) ===== */
    .kaynana-eyes{
      position: relative;
      z-index: 3;
      margin-top: 8px;
      width: 200px;
      height: 86px;
      display:flex;
      align-items:center;
      justify-content:center;
      gap: 16px;
      pointer-events:none;
      background: transparent;
      border: none;
      box-shadow: none;
    }
    .eye-wrap{ position:relative; width:60px; height:72px; display:flex; align-items:center; justify-content:center; }
    .brow{
      position:absolute;
      top: -6px;
      width: 62px;
      height: 18px;
      border-top: 5px solid rgba(255,255,255,.55);
      border-radius: 999px;
      transform: rotate(-6deg);
      opacity:.55;
    }
    .lashes{
      position:absolute;
      top: 15px;
      width: 64px;
      height: 12px;
      opacity:.28;
      display:flex;
      justify-content:space-between;
    }
    .lashes span{
      width: 10px; height: 10px;
      border-top: 2px solid rgba(255,255,255,.55);
      border-radius: 999px;
      transform: rotate(18deg);
    }
    .eye{
      width: 58px;
      height: 58px;
      border-radius: 50%;
      background: rgba(255,255,255,.95);
      position: relative;
      overflow:hidden;
      box-shadow: inset 0 -3px 0 rgba(0,0,0,.12);
    }
    .pupil{
      width: 21px;
      height: 21px;
      border-radius: 50%;
      background: rgba(0,0,0,.80);
      position:absolute;
      top: 18px;
      left: 18px;
      transition: transform .10s linear;
    }
    .shine{
      width: 7px; height: 7px;
      border-radius: 50%;
      background: rgba(255,255,255,.85);
      position:absolute;
      top: 10px; left: 12px;
      opacity:.9;
    }
    .lid{
      position:absolute;
      inset:0;
      background: rgba(0,0,0,.18);
      transform: translateY(-110%);
      border-radius: 50%;
      animation: blink 5.8s ease-in-out infinite;
    }
    @keyframes blink{
      0%, 92%, 100%{ transform: translateY(-110%); }
      94%{ transform: translateY(0%); }
      96%{ transform: translateY(-110%); }
    }

    /* ===== ICON STACK ===== */
    .login-stack{
      position: relative;
      z-index: 3;
      width: min(440px, 92vw);
      display:flex;
      flex-direction:column;
      align-items:center;
      gap: 12px;
      margin-top: 2px;
    }
    .btn-icon{
      width: 100%;
      height: 56px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      color:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      gap: 12px;
      font-weight: 950;
      font-size: 15px;
      cursor:pointer;
      user-select:none;
      box-shadow: 0 14px 30px rgba(0,0,0,.40), inset 0 1px 0 rgba(255,255,255,.12);
      transition: transform .12s ease, filter .12s ease;
    }
    .btn-icon:active{ transform: translateY(1px); filter: brightness(.97); }

    /* Google beyaz badge + multicolor G */
    .g-badge{
      width: 30px; height: 30px;
      border-radius: 12px;
      background:#fff;
      display:flex; align-items:center; justify-content:center;
      box-shadow: inset 0 -1px 0 rgba(0,0,0,.10);
    }
    .g-badge svg{ width:18px; height:18px; display:block; }

    /* Apple kendi rengi: beyaz logo */
    .a-badge{
      width: 30px; height: 30px;
      border-radius: 12px;
      background: rgba(255,255,255,.10);
      display:flex; align-items:center; justify-content:center;
      box-shadow: inset 0 -1px 0 rgba(0,0,0,.12);
    }
    .a-badge svg{ width:18px; height:18px; display:block; fill:#fff; opacity:.92; }

    /* GSI overlay */
    .google-wrap{ position: relative; width: 100%; height: 56px; }
    #googleBtnWrap{
      position:absolute; inset:0;
      width:100%; height:100%;
      z-index: 50;
      opacity: 0.01;
      cursor:pointer;
    }
    #googleBtnWrap iframe{
      width:100% !important;
      height:100% !important;
      pointer-events:auto !important;
      cursor:pointer !important;
    }

    /* ===== DEMO: Apple altından başlar, orada kaybolur (CLIP) ===== */
    .demo-clip{
      width: 100%;
      margin-top: 8px;     /* ✅ Apple altı */
      max-height: calc(100dvh - 420px); /* göz+butonlar+input+footer sonrası */
      overflow: hidden;    /* ✅ Apple altında kaybolma */
      pointer-events:none;
    }

    /* Mesajlar alttan yukarı büyür */
    .demo-stream{
      width:100%;
      display:flex;
      flex-direction:column-reverse;
      gap: 10px;
      padding: 0;
      min-height: 160px;
    }

    /* ✅ Mesajların altında ekstra zemin yok */
    .demo-bubble{
      max-width: 88%;
      padding: 10px 12px;
      border-radius: 16px;
      font-weight: 780;
      font-size: 12px;
      line-height: 1.35;
      color: rgba(255,255,255,.92);
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      box-shadow: 0 12px 28px rgba(0,0,0,.22);
      backdrop-filter: blur(6px);
    }
    .demo-bubble.bot{
      border-left: 3px solid var(--gold);
      margin-right:auto;
    }
    .demo-bubble.user{
      border-right: 3px solid var(--pistachio);
      margin-left:auto;
      text-align:right;
    }
    .demo-bubble.warn{
      border-left: 3px solid var(--red);
    }

    .demo-typing{
      display:flex;
      gap:6px;
      align-items:center;
      margin-top: 8px;
      opacity:.9;
    }
    .demo-typing .dot{
      width:6px;height:6px;border-radius:99px;
      background: rgba(255,255,255,.70);
      animation: dot 1.1s infinite ease-in-out;
    }
    .demo-typing .dot:nth-child(2){ animation-delay:.15s; }
    .demo-typing .dot:nth-child(3){ animation-delay:.3s; }
    @keyframes dot{
      0%,100%{ transform: translateY(0); opacity:.55; }
      50%{ transform: translateY(-4px); opacity:1; }
    }

    /* ===== Demo input sabit altta (HİÇ OYNAMAZ) ===== */
    .demo-inputbar{
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      width: min(480px, calc(100vw - 18px));
      bottom: 66px; /* footerbar üstü */
      z-index: 2600;
      padding: 0 14px;
      pointer-events:none;
    }
    .demo-input{
      width: 100%;
      height: 46px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      display:flex;
      align-items:center;
      padding: 0 14px;
      gap: 10px;
      box-shadow: 0 18px 40px rgba(0,0,0,.25);
      backdrop-filter: blur(10px);
    }
    .demo-caret{
      width: 8px;
      height: 18px;
      border-radius: 2px;
      background: rgba(190,242,100,.85);
      opacity: .0;
      animation: caret 1.1s infinite;
    }
    @keyframes caret{
      0%,45%{ opacity: 0; }
      55%,100%{ opacity: 1; }
    }
    .demo-inputtext{
      flex:1;
      color: rgba(255,255,255,.86);
      font-weight: 850;
      font-size: 12px;
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }
    .demo-send{
      width: 30px;
      height: 30px;
      border-radius: 12px;
      background: rgba(190,242,100,.14);
      border: 1px solid rgba(190,242,100,.25);
      display:flex;
      align-items:center;
      justify-content:center;
      color: rgba(190,242,100,.95);
      font-weight: 1000;
      font-size: 12px;
    }

    /* Alt bar sabit */
    .login-footerbar{
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      width: min(480px, calc(100vw - 18px));
      bottom: 0;
      z-index: 2800;
      background: rgba(0,0,0,.92);
      border-top: 1px solid rgba(255,255,255,.06);
      padding: 10px 12px calc(10px + env(safe-area-inset-bottom));
      display:flex;
      flex-direction:column;
      gap: 8px;
    }
    .login-links{
      display:flex;
      justify-content:center;
      gap: 16px;
      flex-wrap:wrap;
      font-size:12px;
      font-weight: 900;
    }
    .login-links a{
      color: rgba(255,255,255,.70);
      text-decoration:none;
      white-space:nowrap;
    }
    .login-brand{
      text-align:center;
      font-size:11px;
      font-weight: 900;
      color: rgba(255,255,255,.55);
    }

    /* Terms overlay */
    .full-overlay{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.92);
      z-index: 9950;
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
    }
    .full-overlay.active{ display:flex; }
    .terms-card{
      width:min(520px, 92vw);
      background:#0e0e0e;
      border:1px solid rgba(255,255,255,.12);
      border-radius: 22px;
      box-shadow: 0 40px 120px rgba(0,0,0,.75);
      overflow:hidden;
    }
    .terms-head{
      padding: 14px 14px 10px;
      border-bottom:1px solid rgba(255,255,255,.10);
      display:flex;
      align-items:center;
      justify-content:space-between;
      color:#fff;
      font-weight: 950;
    }
    .x-btn{
      width:40px; height:40px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      color:#fff;
      font-size:20px;
      cursor:pointer;
    }
    #termsFrame{
      width:100%;
      height: 330px;
      border:0;
      background:#fff;
    }
    .agreement{
      padding: 12px 14px 14px;
      display:flex;
      flex-direction:column;
      gap: 10px;
    }
    .agree-row{
      display:flex;
      gap:10px;
      align-items:center;
      color: rgba(255,255,255,.85);
      font-weight: 900;
      font-size: 12px;
    }
    .agree-row input{ width:18px; height:18px; }
    #termsAcceptBtn{
      width:100%;
      height: 48px;
      border-radius: 16px;
      border:none;
      background: var(--gold, #ffb300);
      color:#111;
      font-weight: 950;
      cursor:pointer;
      opacity:.65;
    }
    #termsAcceptBtn.enabled{ opacity:1; }
  </style>
</head>

<body>
<div class="mobile-frame" id="mobileFrame">

  <!-- ÜST BAR -->
  <div class="topbar">
    <div class="left-controls"></div>

    <div class="brand-wrapper idle" id="brandWrapper">
      <div class="logo-area">
        <svg class="seesaw-svg" viewBox="0 0 40 20" aria-hidden="true">
          <g class="seesaw-bar" id="seesawBar">
            <line x1="0" y1="8" x2="40" y2="8" stroke="#ccc" stroke-width="2" stroke-linecap="round" />
            <circle cx="3" cy="5" r="3" fill="#bef264" />
            <circle cx="37" cy="5" r="3" fill="#ffb300" id="orangeBall" />
          </g>
          <polygon points="17,14 23,14 20,8" fill="none" stroke="#666" stroke-width="1.5" />
        </svg>
        <div class="brand-name">Caynana<span style="color:var(--pistachio);">AI</span></div>
      </div>
      <div class="slogan">Yapay Zekanın Geleneksel Aklı</div>
    </div>

    <div class="right-controls"></div>
  </div>

  <!-- STAGE -->
  <div class="login-stage">
    <div class="bg-anim"></div>

    <!-- GÖZLER -->
    <div class="kaynana-eyes" aria-hidden="true" id="eyesBox">
      <div class="eye-wrap">
        <div class="brow"></div>
        <div class="lashes"><span></span><span></span><span></span></div>
        <div class="eye"><div class="pupil" id="p1"></div><div class="shine"></div><div class="lid"></div></div>
      </div>
      <div class="eye-wrap">
        <div class="brow" style="transform:rotate(6deg)"></div>
        <div class="lashes"><span></span><span></span><span></span></div>
        <div class="eye"><div class="pupil" id="p2"></div><div class="shine"></div><div class="lid"></div></div>
      </div>
    </div>

    <!-- ICON STACK + DEMO CLIP -->
    <div class="login-stack">
      <div class="google-wrap">
        <button class="btn-icon" id="googleLoginBtn" type="button">
          <span class="g-badge" aria-hidden="true">
            <svg viewBox="0 0 24 24">
              <path fill="#EA4335" d="M12 10.2v3.9h5.4c-.2 1.2-1.5 3.4-5.4 3.4-3.3 0-6-2.7-6-6s2.7-6 6-6c1.9 0 3.2.8 3.9 1.5l2.7-2.6C17.9 2.8 15.2 1.5 12 1.5 6.8 1.5 2.5 5.8 2.5 11s4.3 9.5 9.5 9.5c5.5 0 9.1-3.9 9.1-9.3 0-.6-.1-1.1-.1-1.6H12z"/>
              <path fill="#34A853" d="M3.8 7.3l3.2 2.3C7.9 7.3 9.8 5.8 12 5.8c1.9 0 3.2.8 3.9 1.5l2.7-2.6C17.9 2.8 15.2 1.5 12 1.5 8.3 1.5 5.1 3.7 3.8 7.3z"/>
              <path fill="#FBBC05" d="M12 20.5c3.1 0 5.7-1 7.6-2.8l-3.5-2.9c-.9.7-2.1 1.2-4.1 1.2-3.2 0-5.9-2.1-6.8-5l-3.3 2.5c1.4 4.1 5.3 7 10.1 7z"/>
              <path fill="#4285F4" d="M21.1 11.2c0-.6-.1-1.1-.1-1.6H12v3.9h5.4c-.3 1.3-1.1 2.4-2.3 3.1l3.5 2.9c2.1-2 3.3-4.9 3.3-8.3z"/>
            </svg>
          </span>
          Google ile Giriş Yap
        </button>
        <div id="googleBtnWrap"></div>
      </div>

      <button class="btn-icon" id="appleLoginBtn" type="button">
        <span class="a-badge" aria-hidden="true">
          <svg viewBox="0 0 24 24">
            <path d="M16.7 13.2c0-2 1.6-3 1.7-3.1-1-1.4-2.6-1.6-3.1-1.6-1.3-.1-2.5.8-3.1.8-.6 0-1.6-.8-2.7-.8-1.4 0-2.7.8-3.4 2.1-1.5 2.6-.4 6.4 1 8.5.7 1 1.5 2.1 2.6 2.1 1 0 1.4-.6 2.7-.6 1.2 0 1.6.6 2.7.6 1.1 0 1.9-1 2.6-2 .8-1.1 1.1-2.2 1.1-2.2-.1 0-2.1-.8-2.1-3.9z"/>
            <path d="M14.6 6.9c.6-.7 1-1.7.9-2.7-.9.1-2 .6-2.6 1.3-.6.6-1.1 1.6-.9 2.6 1 .1 2-.5 2.6-1.2z"/>
          </svg>
        </span>
        Apple ile Giriş Yap
      </button>

      <!-- CLIP: burada başlayan yazılar burada kaybolur -->
      <div class="demo-clip" aria-hidden="true">
        <div class="demo-stream" id="demoStream"></div>
        <div class="demo-typing" id="demoTyping">
          <span class="dot"></span><span class="dot"></span><span class="dot"></span>
        </div>
      </div>
    </div>
  </div>

  <!-- Demo input sabit -->
  <div class="demo-inputbar" aria-hidden="true">
    <div class="demo-input">
      <div class="demo-caret"></div>
      <div class="demo-inputtext" id="demoInputText"></div>
      <div class="demo-send">➤</div>
    </div>
  </div>

  <!-- ALT BAR -->
  <div class="login-footerbar">
    <div class="login-links">
      <a href="/pages/about.html">Hakkımızda</a>
      <a href="/pages/faq.html">SSS</a>
      <a href="/pages/privacy.html">Gizlilik</a>
      <a href="/pages/contact.html">İletişim</a>
    </div>
    <div class="login-brand">@CaynanaAI By Ozyigit’s 2026</div>
  </div>

</div>

<!-- SÖZLEŞME -->
<div class="full-overlay" id="termsOverlay">
  <div class="terms-card">
    <div class="terms-head">
      <div>Sözleşme</div>
      <button id="closeTermsBtn" class="x-btn" aria-label="Kapat">×</button>
    </div>

    <iframe id="termsFrame" src="/pages/sozlesme.html" title="Kullanıcı Sözleşmesi"></iframe>

    <div class="agreement">
      <div class="agree-row">
        <input type="checkbox" id="termsCheck" />
        <label for="termsCheck">Onaylıyorum.</label>
      </div>
      <button id="termsAcceptBtn" type="button" disabled>Onayla ve Devam Et</button>
      <div class="login-brand">@CaynanaAI By Ozyigit’s 2026</div>
    </div>
  </div>
</div>

<script type="module">
  import { STORAGE_KEY } from "/js/config.js";
  import { initAuth, acceptTerms, logout } from "/js/auth.js";

  const $ = (id) => document.getElementById(id);
  function safeJson(s, fb={}){ try{ return JSON.parse(s||""); }catch{ return fb; } }
  function termsKey(email=""){ return `caynana_terms_accepted_at::${String(email||"").toLowerCase().trim()}`; }

  function hasUser(){
    const u = safeJson(localStorage.getItem(STORAGE_KEY), {});
    return !!(u && u.email && u.isSessionActive);
  }
  function hasAcceptedTerms(){
    const u = safeJson(localStorage.getItem(STORAGE_KEY), {});
    const email = String(u?.email||"").toLowerCase().trim();
    if(!email) return false;
    return !!localStorage.getItem(termsKey(email));
  }
  function goChat(){ window.location.replace("/pages/chat.html"); }

  // Apple tık: chat'e uyarı mesajı düş
  const demoStream = $("demoStream");
  function pushWarn(text){
    if(!demoStream) return;
    const el = document.createElement("div");
    el.className = "demo-bubble bot warn";
    el.textContent = text;
    // column-reverse: prepend -> altta görünür
    demoStream.prepend(el);
  }

  $("appleLoginBtn")?.addEventListener("click", (e) => {
    e.preventDefault();
    pushWarn("Evladım Apple daha hazır değil… Biraz sabır. Şimdilik Google ile devam et, ben seni içeri alayım.");
  });

  // Terms
  const termsOverlay = $("termsOverlay");
  const termsCheck = $("termsCheck");
  const termsAcceptBtn = $("termsAcceptBtn");
  const closeTermsBtn = $("closeTermsBtn");

  function openTerms(){
    if(!termsOverlay) return;
    termsOverlay.classList.add("active");
    if(termsCheck) termsCheck.checked = false;
    if(termsAcceptBtn){
      termsAcceptBtn.disabled = true;
      termsAcceptBtn.classList.remove("enabled");
    }
  }

  if(termsCheck && termsAcceptBtn){
    termsCheck.addEventListener("change", () => {
      const ok = !!termsCheck.checked;
      termsAcceptBtn.disabled = !ok;
      termsAcceptBtn.classList.toggle("enabled", ok);
    });
  }

  closeTermsBtn?.addEventListener("click", () => {
    termsOverlay?.classList.remove("active");
    logout();
  });

  termsAcceptBtn?.addEventListener("click", async () => {
    if(!termsCheck?.checked) return;
    const ok = await acceptTerms();
    if(ok) goChat();
  });

  if(hasUser()){
    if(hasAcceptedTerms()) goChat();
    else openTerms();
  }

  initAuth();

  // ===== Tahtaravalli: yazana göre eğilsin =====
  const bw = $("brandWrapper");
  function seesaw(state){
    if(!bw) return;
    bw.classList.remove("usering","botting","thinking");
    if(state === "user") bw.classList.add("usering");
    if(state === "bot") bw.classList.add("botting","thinking");
  }
  function seesawIdle(){
    if(!bw) return;
    bw.classList.remove("usering","botting","thinking");
  }

  // ===== Gözler: pointer takip; yoksa yazıları okur gibi daha aşağı baksın =====
  const p1 = $("p1");
  const p2 = $("p2");
  const eyesBox = $("eyesBox");
  function clamp(v,min,max){ return Math.max(min, Math.min(max, v)); }
  let lastPointerAt = Date.now();

  function setPupil(px, py){
    const x = clamp(px, -10, 10);
    const y = clamp(py, -8, 8);
    const t = `translate(${x}px, ${y}px)`;
    if(p1) p1.style.transform = t;
    if(p2) p2.style.transform = t;
  }
  function aimAt(clientX, clientY){
    if(!eyesBox) return;
    const r = eyesBox.getBoundingClientRect();
    const cx = r.left + r.width/2;
    const cy = r.top + r.height/2;
    const dx = (clientX - cx) / 55;
    const dy = (clientY - cy) / 65;
    setPupil(dx, dy);
  }

  window.addEventListener("mousemove", (e)=>{
    lastPointerAt = Date.now();
    aimAt(e.clientX, e.clientY);
  }, { passive:true });

  window.addEventListener("touchmove", (e)=>{
    const t = e.touches && e.touches[0];
    if(!t) return;
    lastPointerAt = Date.now();
    aimAt(t.clientX, t.clientY);
  }, { passive:true });

  // idle: en yeni balona bak (okur gibi aşağı hedef)
  setInterval(()=>{
    const idle = (Date.now() - lastPointerAt) > 900;
    if(!idle) return;

    let tx = window.innerWidth/2;
    let ty = window.innerHeight*0.78;

    try{
      const last = demoStream?.firstElementChild; // column-reverse: newest = first
      const r = last?.getBoundingClientRect?.();
      if(r){
        tx = r.left + r.width/2;
        ty = r.top + r.height/2;
      }
    }catch{}

    aimAt(tx, ty);
  }, 240);

  // ===== DEMO: input sabit; inputa yaz -> balon olarak çıkar -> kaynana cevap =====
  const typing = $("demoTyping");
  const inputText = $("demoInputText");

  const questions = [
    "Kaynana… sana nasıl üye olurum?",
    "Üyelik ücretli mi?",
    "Sözleşme zorunlu mu?",
    "Verilerimi kaydediyor musun?",
    "S.P ne işe yarıyor?",
    "Profil doldurunca ne olur?",
    "Google ile giriş güvenli mi?",
    "Hesabımı silebilir miyim?",
    "Diyet modülü ne yapıyor?",
    "Sağlık kısmı doktor mu?"
  ];
  const answers = [
    "Google ya da Apple’dan birini seç evladım. Şimdilik Google daha hızlı.",
    "Ücretsiz başlıyorsun evladım. Sonra istersen PLUS/PRO bakarız.",
    "Zorunlu. Onaylamadan içeri giremezsin. Düzen şart.",
    "Görüntü/ses kaydetmem. Sadece izin verdiğin profil bilgisi durur.",
    "Samimiyet puanı evladım. Artarsa ben de sana daha içten konuşurum.",
    "Her alan bir ödül. İşin kolaylaşır, ben de seni daha iyi tanırım.",
    "Güvenli evladım. Yetkiyi sen veriyorsun, istemezsen çıkarsın.",
    "Silersin tabii. Menüde ‘Hesabımı Sil’ var, bir de teyit sorarım.",
    "Diyet sana günlük menü çıkarır, boy-kilo-BMI ile toparlar.",
    "Doktor değilim; ama yön gösteririm. Acilse doktora gideceksin."
  ];
  function pick(arr){ return arr[Math.floor(Math.random() * arr.length)]; }

  function makeBubble(cls){
    const el = document.createElement("div");
    el.className = `demo-bubble ${cls}`;
    el.textContent = "";
    return el;
  }

  const sleep = (ms)=>new Promise(r=>setTimeout(r, ms));

  async function typeInto(el, text, speed=30){
    el.textContent = "";
    const s = String(text || "");
    for(let i=0;i<s.length;i++){
      el.textContent += s[i];
      await sleep(speed);
    }
  }
  async function typeIntoInput(text){
    if(!inputText) return;
    inputText.textContent = "";
    const s = String(text || "");
    for(let i=0;i<s.length;i++){
      inputText.textContent += s[i];
      await sleep(34);
    }
  }

  function trimBubbles(max=18){
    if(!demoStream) return;
    const kids = Array.from(demoStream.children);
    if(kids.length > max){
      kids.slice(max).forEach(n=>n.remove());
    }
  }

  async function runDemo(){
    if(!demoStream) return;
    demoStream.innerHTML = "";

    while(true){
      const q = pick(questions);
      const a = pick(answers);

      // user writing
      seesaw("user");
      if(typing) typing.style.display = "none";
      await typeIntoInput(q);
      await sleep(220);

      // send -> user bubble
      const ub = makeBubble("user");
      demoStream.prepend(ub);
      await typeInto(ub, q, 30);
      if(inputText) inputText.textContent = "";
      trimBubbles(18);
      await sleep(340);

      // bot reply
      seesaw("bot");
      if(typing) typing.style.display = "flex";
      await sleep(420);

      const bb = makeBubble("bot");
      demoStream.prepend(bb);
      await typeInto(bb, a, 32);

      if(typing) typing.style.display = "none";
      trimBubbles(18);

      seesawIdle();
      await sleep(740);
    }
  }

  runDemo();
</script>
</body>
</html>

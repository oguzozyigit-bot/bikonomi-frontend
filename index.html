<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>Caynana.AI</title>

<style>
/* --- TEMEL AYARLAR --- */
:root{
  --bg: #050505;
  --amber: #ffb300;
  --text: #e0e0e0;
  --drawer-bg: #141414;
}
*{box-sizing:border-box; -webkit-tap-highlight-color: transparent;}
body{
  margin: 0; background: #000; display: flex; justify-content: center; align-items: center;
  height: 100vh; overflow: hidden; color: var(--text);
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
}
.phone{
  width: 100%; max-width: 420px; height: 100%; max-height: 900px; background: var(--bg);
  display: flex; flex-direction: column; position: relative; overflow: hidden;
}
@media(min-width: 500px){
  .phone{ border-radius: 40px; box-shadow: 0 0 0 10px #111, 0 30px 80px rgba(0,0,0,0.8); height: 95vh; }
}

/* --- TOPBAR --- */
.topbar {
  position: absolute; top: 0; left: 0; width: 100%; height: 60px;
  display: flex; align-items: center; justify-content: space-between; padding: 0 14px; z-index: 50;
}
.menuBtn { background: none; border: none; font-size: 24px; color: #666; cursor: pointer; padding: 6px; }
.authDot { width: 8px; height: 8px; background: #444; border-radius: 50%; }

/* --- HEADER & EYES (KARAKTER MOTORU) --- */
.header{
  height: 220px; display: flex; justify-content: center; align-items: center;
  background: radial-gradient(circle at center, rgba(255,179,0,0.08) 0%, #000 74%);
  position: relative; z-index: 10; flex-shrink: 0; margin-top: 20px; transition: height 0.3s ease;
}
/* Klavye açılınca header biraz küçülsün ki gözler kaybolmasın */
body.keyboard-open .header { height: 160px; }

.eyes-container{ display:flex; gap: 24px; transform: scale(0.92); transition: transform 0.3s; }

.eye-wrapper{
  width: 140px; height: 100px; position: relative;
  display:flex; justify-content:center; align-items:center;
}

/* KAŞLAR (Duygunun Anahtarı) */
.brow{
  position:absolute; top: -5px; left: 50%; transform: translateX(-50%);
  width: 120px; height: 24px; z-index: 30;
  transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); /* Yaylanma efekti */
}
.brow::before{
  content:""; position:absolute; inset:0;
  background: #111; border-radius: 50%;
  clip-path: polygon(0% 60%, 15% 40%, 50% 30%, 85% 40%, 100% 60%, 100% 100%, 0% 100%);
  filter: blur(1px);
}

/* GÖZ ÇERÇEVESİ */
.eye-frame{
  position:absolute; top: 25px; left: 50%; transform: translateX(-50%);
  width: 140px; height: 75px;
  border-radius: 60% 60% 50% 50% / 70% 70% 50% 50%;
  border: 2px solid rgba(255,255,255,0.8);
  background: rgba(0,0,0,0.4); z-index: 10;
  box-shadow: 0 0 15px rgba(255,179,0,0.4), inset 0 0 10px #000;
  transition: all 0.3s;
}

/* GÖZ BEBEĞİ (PUPIL) */
.iris-group {
  position: absolute; top: 62px; left: 50%;
  transform: translate(-50%, -50%); /* Başlangıç */
  width: 40px; height: 40px; z-index: 15;
  transition: transform 0.1s cubic-bezier(0.2, 0, 0.2, 1); /* Hızlı takip */
}
.iris {
  width: 100%; height: 100%; border-radius: 50%;
  background: radial-gradient(circle, #ffb300 0%, #5a3a00 70%);
  border: 1px solid rgba(255,255,255,0.3);
  box-shadow: 0 0 10px rgba(255,179,0,0.6);
}
.pupil-black {
  position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%);
  width: 18px; height: 18px; background: #000; border-radius: 50%;
}
.reflection {
  position: absolute; top: 30%; left: 30%; width: 6px; height: 6px;
  background: #fff; border-radius: 50%; filter: blur(0.5px);
}

/* GÖZ KAPAĞI */
.lid{
  position:absolute; top: 23px; left: 50%; transform: translateX(-50%);
  width: 150px; height: 0%; background: var(--bg); z-index: 25;
  border-bottom: 2px solid #111; transition: height 0.15s;
}
.lower-lid {
  position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);
  width: 150px; height: 0%; background: var(--bg); z-index: 25;
  border-top: 2px solid #111; transition: height 0.3s;
}

/* --- DUYGU SINIFLARI (CSS CLASSES) --- */

/* 1. OKUMA MODU (Aşağı Bakış) */
.reading .iris-group { transform: translate(-50%, 15px) !important; } /* Gözler aşağı */
.reading .lid { height: 40% !important; } /* Gözler hafif kısık (odaklanma) */
.reading .brow { transform: translateX(-50%) translateY(2px); } /* Kaşlar nötr */

/* 2. KIZGIN (Angry) */
.angry .brow { transform: translateX(-50%) translateY(12px) rotate(15deg); } /* Çatık */
.angry .lid { height: 45%; }
.angry .lower-lid { height: 20%; } /* Alt kapak gergin */
.angry .eye-frame { border-color: #ff4444; box-shadow: 0 0 20px rgba(255,0,0,0.4); }

/* 3. MUTLU (Happy) */
.happy .brow { transform: translateX(-50%) translateY(-8px); } /* Kalkık */
.happy .lower-lid { height: 40%; border-top-left-radius: 50%; border-top-right-radius: 50%; } /* Elmacık kemiği */
.happy .iris-group { transform: translate(-50%, -55%); }

/* 4. ÜZGÜN (Sad) */
.sad .brow { transform: translateX(-50%) translateY(-5px) rotate(-10deg); } /* Ortası yukarı */
.sad .lid { height: 50%; }
.sad .iris-group { transform: translate(-50%, 10px); }

/* 5. ŞAŞKIN (Shock) */
.shock .brow { transform: translateX(-50%) translateY(-15px); } /* Çok kalkık */
.shock .eye-frame { transform: translateX(-50%) scale(1.1); }
.shock .iris-group { transform: translate(-50%, -50%) scale(0.7); } /* Bebek küçülür */

/* --- CHAT ALANI --- */
.chat-area{ flex: 1; padding: 20px; display:flex; flex-direction:column; gap: 15px; overflow-y: auto; }
.msg{ max-width: 85%; padding: 12px 16px; border-radius: 18px; font-size: 15px; color: #fff; animation: popIn 0.3s ease; }
@keyframes popIn{ from{transform: translateY(10px); opacity: 0;} to{transform: translateY(0); opacity: 1;} }
.msg.caynana{ align-self: flex-start; background: #1a1a1a; border-left: 3px solid var(--amber); }
.msg.user{ align-self: flex-end; background: #333; }

/* --- INPUT --- */
.input-dock{ padding: 15px 20px 25px; background: #000; display:flex; align-items:center; gap:12px; }
input{ width:100%; background:#111; border:1px solid #333; border-radius:25px; padding:14px 20px; color:#fff; font-size:16px; outline:none; }
input:focus{ border-color: var(--amber); }

</style>
</head>
<body>

<div class="phone" id="phone">
  
  <header class="topbar">
    <button class="menuBtn">☰</button>
    <div class="authDot"></div>
  </header>

  <div class="header">
    <div class="eyes-container">
      
      <div class="eye-wrapper" id="eyeL">
        <div class="brow"></div>
        <div class="lid"></div>
        <div class="eye-frame"></div>
        <div class="iris-group">
          <div class="iris"><div class="pupil-black"><div class="reflection"></div></div></div>
        </div>
        <div class="lower-lid"></div>
      </div>

      <div class="eye-wrapper" id="eyeR">
        <div class="brow"></div>
        <div class="lid"></div>
        <div class="eye-frame"></div>
        <div class="iris-group">
          <div class="iris"><div class="pupil-black"><div class="reflection"></div></div></div>
        </div>
        <div class="lower-lid"></div>
      </div>

    </div>
  </div>

  <div class="chat-area" id="chatArea">
    <div class="msg caynana">
      Gözüm üzerinde... <br> 
      Yaz bakalım, ne anlatacaksın?
    </div>
  </div>

  <div class="input-dock">
    <input type="text" id="userInput" placeholder="Buraya yazarken bana bakma..." autocomplete="off">
  </div>

</div>

<script>
const eyes = [document.getElementById("eyeL"), document.getElementById("eyeR")];
const pupils = document.querySelectorAll(".iris-group");
const input = document.getElementById("userInput");
const chatArea = document.getElementById("chatArea");
const body = document.body;

/* --- 1. OKUMA MODU (Klavye Açılınca) --- */
// Input'a tıklandığında (Focus)
input.addEventListener('focus', () => {
  body.classList.add('keyboard-open'); // Header'ı küçült
  setMood('reading'); // Gözleri aşağı indir
});

// Input'tan çıkıldığında (Blur)
input.addEventListener('blur', () => {
  body.classList.remove('keyboard-open');
  setMood('normal'); // Gözleri normale çevir
});

// Yazarken anlık takip (Opsiyonel: Yazdıkça göz hafif titresin)
input.addEventListener('input', () => {
  if (body.classList.contains('keyboard-open')) {
    // Hafif sağa sola oynat okuyormuş gibi
    const randomX = (Math.random() - 0.5) * 5; 
    pupils.forEach(p => p.style.transform = `translate(calc(-50% + ${randomX}px), 15px)`);
  }
});


/* --- 2. DUYGU KONTROLÜ --- */
function setMood(mood) {
  eyes.forEach(e => {
    // Önceki tüm hisleri sil
    e.classList.remove('angry', 'happy', 'sad', 'shock', 'reading');
    
    // Göz bebeği pozisyonunu resetle (CSS class halledecek)
    e.querySelector('.iris-group').style.transform = ''; 

    // Yeni hissi ekle
    if(mood !== 'normal') e.classList.add(mood);
  });
}

/* --- 3. MOUSE TAKİP (Okuma Modunda Değilse) --- */
document.addEventListener('mousemove', (e) => {
  if (input === document.activeElement) return; // Yazıyorsa takip etme, aşağı baksın

  const x = e.clientX; 
  const y = e.clientY;
  
  eyes.forEach((eye, i) => {
    const rect = eye.getBoundingClientRect();
    const cx = rect.left + rect.width / 2;
    const cy = rect.top + rect.height / 2;
    
    const dx = (x - cx) / 15; // Hassasiyet
    const dy = (y - cy) / 10;
    
    pupils[i].style.transform = `translate(calc(-50% + ${dx}px), calc(-50% + ${dy}px))`;
  });
});

/* --- 4. METİN ANALİZİ (Karakter) --- */
input.addEventListener('keypress', (e) => {
  if (e.key === 'Enter' && input.value.trim() !== '') {
    const text = input.value;
    addMessage(text, 'user');
    input.value = '';
    input.blur(); // Klavyeyi kapat (Test için)
    
    setTimeout(() => {
      let response = "";
      let mood = "normal";
      const lower = text.toLowerCase();

      // DUYGU HARİTASI
      if (lower.includes("kızgın") || lower.includes("nefret") || lower.includes("aptal")) {
        mood = "angry";
        response = "Bana sesini yükseltme! Haddini bil evladım.";
      } 
      else if (lower.includes("hahaha") || lower.includes("komik") || lower.includes("güzel")) {
        mood = "happy";
        response = "Ay ilahi... Güldürdün beni, Allah da seni güldürsün.";
      } 
      else if (lower.includes("üzgün") || lower.includes("öldü") || lower.includes("kötü")) {
        mood = "sad";
        response = "Kıyamam sana... İçim parçalandı bak şimdi. Gel otur şöyle.";
      } 
      else if (lower.includes("şok") || lower.includes("inanmıyorum") || lower.includes("yuh")) {
        mood = "shock";
        response = "Neeey? Ciddi olamazsın! Kız çabuk anlat detayları!";
      } 
      else {
        mood = "normal";
        response = "Ee sonra? Seni dinliyorum, devam et.";
      }

      setMood(mood);
      addMessage(response, "caynana");
      
      // 3 Saniye sonra normale dön
      setTimeout(() => setMood('normal'), 3000);

    }, 800);
  }
});

function addMessage(text, type) {
  const div = document.createElement("div");
  div.className = `msg ${type}`;
  div.innerHTML = text;
  chatArea.appendChild(div);
  chatArea.scrollTop = chatArea.scrollHeight;
}

</script>
</body>
</html>

<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Caynana AI v5.2 FINAL</title>
  <link rel="icon" href="data:,">
  <link rel="stylesheet" href="/css/style.css?v=1">
  <script src="https://accounts.google.com/gsi/client" async defer></script>

  <!-- âœ… PREMIUM OVERRIDES (style.css bozulmadan Ã¼stÃ¼ne ek) -->
  <style>
    /* --- MENU PREMIUM SKIN --- */
    .menu-sidebar{
      background:
        radial-gradient(1200px 400px at 20% -10%, rgba(190,242,100,.12), transparent 55%),
        radial-gradient(900px 420px at 85% 0%, rgba(255,179,0,.10), transparent 50%),
        rgba(12,12,12,.98);
      border:1px solid rgba(255,255,255,.10);
      box-shadow: 0 30px 90px rgba(0,0,0,.55);
      backdrop-filter: blur(10px);
    }

    .new-chat-btn{
      position:relative;
      border-radius:16px;
      box-shadow:
        0 14px 30px rgba(0,0,0,.45),
        inset 0 1px 0 rgba(255,255,255,.14);
      transform: translateZ(0);
    }
    .new-chat-btn:active{ transform: translateY(1px); }

    /* Profil kÄ±sayol (Yeni sohbet altÄ±nda turuncu, 3D) */
    .profile-shortcut-wrap{
      margin:10px 0 10px;
      padding:0 2px;
    }
    .profile-shortcut-btn{
      display:flex; align-items:center; gap:10px;
      padding:12px 12px;
      border-radius:16px;
      cursor:pointer;
      user-select:none;
      background: linear-gradient(180deg, rgba(255,179,0,.22), rgba(0,0,0,0));
      border: 1px solid rgba(255,179,0,.45);
      box-shadow: 0 16px 28px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.14);
      transition: transform .12s ease, filter .12s ease;
    }
    .profile-shortcut-btn:active{ transform: translateY(1px); filter: brightness(.98); }
    .profile-shortcut-ico{
      width:34px; height:34px; border-radius:12px;
      display:flex; align-items:center; justify-content:center;
      background: rgba(255,179,0,.18);
      border:1px solid rgba(255,179,0,.35);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.12);
      font-size:18px;
    }
    .profile-shortcut-title{ font-weight:950; color:#ffb300; line-height:1.1; }
    .profile-shortcut-sub{ font-size:12px; color:#ffb300; opacity:.88; margin-top:2px; }

    /* Bloklar */
    .menu-block{
      background: rgba(20,20,20,.55);
      border: 1px solid rgba(255,255,255,.10);
      border-radius:18px;
      padding:12px;
      margin:10px 0;
      box-shadow: 0 14px 30px rgba(0,0,0,.28), inset 0 1px 0 rgba(255,255,255,.10);
    }
    .block-head{
      display:flex; align-items:center; justify-content:space-between;
      padding:2px 2px 10px;
      border-bottom:1px solid rgba(255,255,255,.10);
      margin-bottom:10px;
      letter-spacing:.8px;
      text-transform:uppercase;
      font-weight:900;
      font-size:11px;
      opacity:.95;
    }
    .block-head small{ text-transform:none; letter-spacing:0; font-weight:700; opacity:.65; }

    /* Blok baÅŸlÄ±k renkleri */
    .menu-block.asistan .block-head{ color:#bef264; }
    .menu-block.astro .block-head{ color:#a78bfa; }
    .menu-block.kurumsal .block-head{ color:#60a5fa; }

    /* Grid */
    .menu-grid{
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
    }

    /* MenÃ¼ butonlarÄ± (3D) */
    .menu-action{
      display:flex; align-items:center; gap:12px;
      border-radius:16px;
      padding:12px 12px;
      cursor:pointer;
      user-select:none;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(0,0,0,0));
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: 0 14px 26px rgba(0,0,0,.30), inset 0 1px 0 rgba(255,255,255,.12);
      transition: transform .12s ease, filter .12s ease;
    }
    .menu-action:active{ transform: translateY(1px); filter: brightness(.98); }

    /* Ä°kon kapsÃ¼lÃ¼ modern */
    .menu-action .ico{
      width:38px; height:38px;
      border-radius:14px;
      display:flex; align-items:center; justify-content:center;
      font-size:18px;
      border:1px solid rgba(255,255,255,.10);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.12);
    }

    /* Grup renkleri */
    .menu-action.grp-asistan .ico{
      background: rgba(190,242,100,.16);
      border-color: rgba(190,242,100,.22);
      color:#bef264;
    }
    .menu-action.grp-astro .ico{
      background: rgba(167,139,250,.16);
      border-color: rgba(167,139,250,.22);
      color:#a78bfa;
    }
    .menu-action.grp-kurumsal .ico{
      background: rgba(96,165,250,.16);
      border-color: rgba(96,165,250,.22);
      color:#60a5fa;
    }

    /* Profil DÃ¼zenle (menÃ¼ iÃ§inde turuncu vurgu) */
    .menu-action.tone-orange{
      border-color: rgba(255,179,0,.35);
      background: linear-gradient(180deg, rgba(255,179,0,.16), rgba(0,0,0,0));
    }
    .menu-action.tone-orange .ico{
      background: rgba(255,179,0,.18);
      border-color: rgba(255,179,0,.28);
      color:#ffb300;
    }
    .menu-action.tone-orange small{ color:#ffb300; opacity:.85; }

    /* History satÄ±rÄ±: aynÄ± satÄ±r title + ikon (kibar) */
    .history-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .history-del{
      width:34px; height:34px;
      border-radius:12px;
      display:flex; align-items:center; justify-content:center;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.10);
      cursor:pointer;
      color: rgba(255,255,255,.65);
    }
    .history-del:active{ transform: translateY(1px); }
    .history-del .ico-trash{ opacity:.9; }

    /* Chat boÅŸken gÃ¶rÃ¼nmesin: main.js zaten display none yapÄ±yor; burada sadece olur da gÃ¶rÃ¼nÃ¼rse */
    .chat-empty::before{
      content:"Yeni sohbet baÅŸlat ya da bir mesaj yaz evladÄ±m ğŸ™‚";
      display:block;
      color: rgba(255,255,255,.55);
      font-weight:800;
      padding: 16px;
      text-align:center;
    }

    /* âœ… (EK) Google renderButton alanÄ± - tasarÄ±mÄ± bozmadan aynÄ± yerde dursun */
    #googleBtnWrap{
      width:100%;
      display:flex;
      justify-content:center;
    }
    #googleBtnWrap > div{
      width:100% !important;
      display:flex !important;
      justify-content:center !important;
    }
  </style>
</head>

<body>

<div class="mobile-frame" id="mobileFrame">
  <div class="topbar">
    <div class="left-controls"><button class="hamb-btn" id="hambBtn">â˜°</button></div>

    <div class="brand-wrapper" id="brandWrapper">
      <div class="logo-area">
        <svg class="seesaw-svg" viewBox="0 0 40 20">
          <g class="seesaw-bar" id="seesawBar">
            <line x1="0" y1="8" x2="40" y2="8" stroke="#ccc" stroke-width="2" stroke-linecap="round" />
            <circle cx="3" cy="5" r="3" fill="#bef264" />
            <circle cx="37" cy="5" r="3" fill="#ffb300" id="orangeBall" />
          </g>
          <polygon points="17,14 23,14 20,8" fill="none" stroke="#666" stroke-width="1.5" />
        </svg>
        <div class="brand-name">Caynana AI</div>
      </div>
      <div class="slogan">Yapay ZekÃ¢nÄ±n Geleneksel AklÄ±</div>
    </div>

    <div class="right-controls">
      <div class="yp-chip">
        <div class="yp-label">SAMÄ°MÄ°YET</div>
        <div class="yp-meter"><div class="yp-fill" id="ypFill"></div></div>
        <div class="yp-num" id="ypNum">10%</div>
      </div>

      <div class="notif-row">
        <button class="icon-btn-top" id="notifBtn" aria-label="Bildirimler">
          <svg viewBox="0 0 24 24"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>
          <div class="badge" id="notifBadge"></div>
        </button>

        <div class="notification-dropdown" id="notifDropdown">
          <div class="notif-header">Bildirimler</div>
          <div class="notif-list" id="notifList"></div>
        </div>

        <button class="icon-btn-top" id="profileBtn" aria-label="Profil">
          <svg viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
        </button>
      </div>
    </div>
  </div>

  <!-- MENU -->
  <div class="menu-overlay" id="menuOverlay">
    <div class="menu-sidebar">
      <button class="new-chat-btn" id="newChatBtn"><span>+</span> YENÄ° SOHBET BAÅLAT</button>

      <!-- âœ… Yeni sohbet altÄ±nda turuncu profil kÄ±sayolu (main.js de basabilir, burada hazÄ±r dursun) -->
      <div class="profile-shortcut-wrap" id="profileShortcutMount">
        <div class="profile-shortcut-btn" id="profileShortcutBtn">
          <div class="profile-shortcut-ico">ğŸ‘¤</div>
          <div style="min-width:0;">
            <div class="profile-shortcut-title">Profil DÃ¼zenle</div>
            <div class="profile-shortcut-sub">Bilgilerini gÃ¼ncelle</div>
          </div>
        </div>
      </div>

      <div class="section-title">GEÃ‡MÄ°Å SOHBETLER</div>
      <div class="history-list" id="historyList"></div>

      <!-- âœ… 3 BLOK MENÃœ -->
      <div class="menu-block asistan">
        <div class="block-head">Asistan <small>GÃ¼nlÃ¼k iÅŸler</small></div>
        <div class="menu-grid" id="menuAsistan"></div>
      </div>

      <div class="menu-block astro">
        <div class="block-head">Astro AI <small>Yorum & fal</small></div>
        <div class="menu-grid" id="menuAstro"></div>
      </div>

      <div class="menu-block kurumsal">
        <div class="block-head">Kurumsal <small>Bilgi & sÃ¶zleÅŸme</small></div>
        <div class="menu-grid" id="menuKurumsal"></div>
      </div>

      <div class="menu-footer-actions">
        <a class="action-link" id="logoutBtn">ğŸ›¡ï¸ GÃ¼venli Ã‡Ä±kÄ±ÅŸ</a>
        <a class="action-link delete-acc" id="deleteAccountBtn">ğŸ—‘ï¸ HesabÄ±mÄ± Sil</a>
        <div class="footer-copy">@CaynanaAI By Ozyigit's 2026</div>
      </div>
    </div>
  </div>

  <!-- CHAT -->
  <div class="chat-area" id="chat"></div>

  <!-- DOCK -->
  <div class="input-dock">
    <div class="dock-inner">
      <button class="icon-btn" id="camBtn" aria-label="Kamera">
        <svg viewBox="0 0 24 24"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg>
      </button>
      <textarea id="msgInput" rows="1" placeholder="Ne lazÄ±m evladÄ±m?" spellcheck="false"></textarea>
      <button class="icon-btn" id="micBtn" aria-label="Mikrofon">
        <svg viewBox="0 0 24 24"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line></svg>
      </button>
      <button class="send-btn" id="sendBtn" aria-label="GÃ¶nder">
        <svg viewBox="0 0 24 24"><path d="M22 2L11 13"></path><path d="M22 2L15 22L11 13L2 9L22 2Z"></path></svg>
      </button>
    </div>
  </div>

  <!-- FOOTER (her sayfada sabit) -->
  <div class="footer-container">
    <div class="footer-links">
      <a href="/pages/hakkimizda.html">HakkÄ±mÄ±zda</a>
      <a href="/pages/sss.html">SSS</a>
      <a href="/pages/gizlilik.html">Gizlilik</a>
      <a href="/pages/iletisim.html">Ä°letiÅŸim</a>
    </div>
    <div class="footer-brand">@CaynanaAI By Ozyigits 2026</div>
  </div>
</div>

<!-- PAGE OVERLAY (HakkÄ±mÄ±zda/SSS/Gizlilik/Ä°letiÅŸim/SÃ¶zleÅŸme burada aÃ§Ä±lÄ±yor) -->
<div class="full-overlay" id="pageOverlay">
  <div class="login-card" style="max-width:90%; max-height:90%; overflow-y:auto;">
    <div style="display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #333; padding-bottom:10px; margin-bottom:10px;">
      <div id="pageTitle" style="font-weight:800; color:#fff;">BaÅŸlÄ±k</div>
      <button id="closePageBtn" style="background:none; border:none; color:#ff5252; font-size:20px;">&times;</button>
    </div>
    <div id="pageContent" style="text-align:left; font-size:13px; color:#ddd;"></div>
  </div>
</div>

<!-- LOGIN -->
<div class="full-overlay active" id="loginOverlay">
  <div class="login-card login-premium">

    <!-- Tahtaravalli (animasyon) -->
    <div class="login-seesaw-wrap" aria-hidden="true">
      <svg class="login-seesaw" viewBox="0 0 220 70">
        <!-- bar -->
        <g class="login-seesaw-bar">
          <line x1="20" y1="30" x2="200" y2="30" stroke="rgba(255,255,255,.65)" stroke-width="6" stroke-linecap="round"/>
          <circle cx="30" cy="20" r="10" fill="#bef264"/>
          <circle cx="190" cy="20" r="10" fill="#ffb300"/>
        </g>
        <!-- pivot -->
        <polygon points="105,55 115,55 110,30" fill="none" stroke="rgba(255,255,255,.35)" stroke-width="3"/>
      </svg>
    </div>

    <div class="brand-name" style="font-size:24px; margin:6px 0 4px;">Caynana.AI</div>
    <div class="login-slogan">Yapay ZekÃ¢nÄ±n Geleneksel AklÄ±</div>

    <div class="login-sub">
      <b>Ãœcretsiz Ã¼yelik</b> iÃ§in lÃ¼tfen giriÅŸ yapÄ±n.
    </div>

    <!-- âœ… VAR OLAN BUTON (EKSÄ°LTMEDÄ°M) -->
    <button class="auth-btn google" id="googleLoginBtn" type="button">Google ile Devam Et</button>

    <!-- âœ… EK: EÄŸer main.js renderButton kullanÄ±yorsa buraya basabilir (tasarÄ±mÄ± bozmadan aynÄ± bÃ¶lgede) -->
    <div id="googleBtnWrap" style="margin-top:10px;"></div>

    <button class="auth-btn apple disabled" id="appleLoginBtn" type="button">Apple GiriÅŸi HazÄ±rlanÄ±yor...</button>
    <div class="coming-soon"></div>

    <!-- /pages linkleri -->
    <div class="trust-links trust-links-clean">
      <a href="/pages/hakkimizda.html">HakkÄ±mÄ±zda</a>
      <a href="/pages/sss.html">SSS</a>
      <a href="/pages/gizlilik.html">Gizlilik</a>
      <a href="/pages/iletisim.html">Ä°letiÅŸim</a>
      <a href="/pages/sozlesme.html">SÃ¶zleÅŸme</a>
      <a href="/pages/uyelik.html">Ãœyelik</a>
    </div>

    <div class="login-footer">@CaynanaAI By Ozyigit's 2026</div>

    <div id="loginHint" class="login-hint">Servisler yÃ¼kleniyor...</div>
  </div>
</div>

<!-- TERMS (ilk giriÅŸte zorunlu) -->
<div class="full-overlay" id="termsOverlay">
  <div class="login-card login-premium">
    <div class="terms-head">
      <div class="brand-name">SÃ¶zleÅŸme</div>
      <button id="closeTermsBtn" class="x-btn" aria-label="Kapat">Ã—</button>
    </div>

    <div class="terms-frame-wrap">
      <iframe id="termsFrame" src="/pages/sozlesme.html" title="KullanÄ±cÄ± SÃ¶zleÅŸmesi"></iframe>
    </div>

    <div class="agreement-box">
      <input type="checkbox" id="termsCheck">
      <label for="termsCheck">OnaylÄ±yorum.</label>
    </div>

    <button class="auth-btn" id="termsAcceptBtn" type="button">Onayla ve Gir</button>
    <div class="login-footer">@CaynanaAI By Ozyigit's 2026</div>
  </div>
</div>

<!-- kÃ¼Ã§Ã¼k toast -->
<div class="toast" id="toast"></div>

<!-- âœ… GSI / FedCM AbortError KALKANÄ± (main.js kaÃ§ kez dokunsa da kÄ±rÄ±lmasÄ±n) -->
<script>
  (function(){
    // Tekil durum
    if(!window.__CAYNANA_GSI__) window.__CAYNANA_GSI__ = {
      patched:false,
      initCalled:false,
      promptCalled:false
    };

    function patchGSI(){
      try{
        if(window.__CAYNANA_GSI__.patched) return;
        if(!window.google || !google.accounts || !google.accounts.id) return;

        const id = google.accounts.id;

        // initialize guard (2. kez Ã§aÄŸrÄ±lÄ±rsa yut)
        const _init = id.initialize.bind(id);
        id.initialize = function(opts){
          if(window.__CAYNANA_GSI__.initCalled){
            // ikinci initialize -> AbortError tetiklememek iÃ§in yut
            return;
          }
          window.__CAYNANA_GSI__.initCalled = true;
          return _init(opts);
        };

        // prompt guard (spam olursa AbortError)
        const _prompt = id.prompt ? id.prompt.bind(id) : null;
        if(_prompt){
          id.prompt = function(cb){
            if(window.__CAYNANA_GSI__.promptCalled){
              return;
            }
            window.__CAYNANA_GSI__.promptCalled = true;
            return _prompt(cb);
          };
        }

        window.__CAYNANA_GSI__.patched = true;
      }catch(e){
        // sessiz
      }
    }

    // GSI async geldiÄŸi iÃ§in birkaÃ§ kez dene
    let tries = 0;
    const t = setInterval(()=>{
      patchGSI();
      tries++;
      if(window.__CAYNANA_GSI__.patched || tries > 60) clearInterval(t);
    }, 100);

    // Profil sayfasÄ±ndan dÃ¶nÃ¼nce bfcache olayÄ± tetikleyebilir -> prompt tekrar spam olmasÄ±n diye sÄ±fÄ±rlama yapma
    window.addEventListener("pageshow", (e) => {
      // burada reset yok; amaÃ§ spam'i engellemek
    });

    // Butona basÄ±nca: main.js zaten handle ediyor olabilir.
    // Yine de â€œfallbackâ€ olarak GSI renderButton kullanÄ±yorsan diye sadece gÃ¼venli yardÄ±mcÄ± koyuyoruz:
    window.__tryRenderGoogleButton = function(){
      try{
        if(!window.google?.accounts?.id) return false;
        const wrap = document.getElementById("googleBtnWrap");
        if(!wrap) return false;
        // main.js render ediyorsa dokunma
        if(wrap.dataset.rendered === "1") return true;

        // EÄŸer global bir client id varsa (main.js koyuyor olabilir) render edebilir:
        const cid = window.GOOGLE_CLIENT_ID || window.googleClientId || "";
        if(!cid) return false;

        google.accounts.id.initialize({
          client_id: cid,
          callback: window.handleGoogleCredential || function(){},
          auto_select: false,
          cancel_on_tap_outside: false,
          use_fedcm_for_prompt: true
        });

        wrap.innerHTML = "";
        google.accounts.id.renderButton(wrap, { theme:"outline", size:"large", shape:"pill", text:"continue_with" });
        wrap.dataset.rendered = "1";
        return true;
      }catch(e){ return false; }
    };
  })();
</script>

<script type="module" src="js/main.js"></script>

<!-- âœ… Profil kÄ±sayoluna direkt yÃ¶n -->
<script>
  // main.js de bunu baÄŸlayacak; burada da â€œyedeÄŸiâ€ var.
  document.addEventListener("DOMContentLoaded", () => {
    const btn = document.getElementById("profileShortcutBtn");
    if(btn){
      btn.addEventListener("click", () => location.href = "/pages/profil.html");
    }
  });
</script>
</body>
</html>

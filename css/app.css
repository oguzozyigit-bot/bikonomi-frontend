:root {
  --primary: #FFB300;
  --font: 'Outfit', sans-serif;
  --bg-dark: #0b0f18;
  --panel-bg: rgba(255, 255, 255, 0.95);
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  -webkit-tap-highlight-color: transparent;
  user-select: none;
  touch-action: manipulation;
}

input, textarea {
  user-select: text;
  -webkit-user-select: text;
  font-family: var(--font);
}

html, body {
  height: 100%;
  width: 100%;
  overflow: hidden;
}

body {
  font-family: var(--font);
  background: #000;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* --- ANA UYGULAMA KUTUSU --- */
#app {
  width: 100%;
  height: 100%;
  max-width: 440px;
  max-height: 900px;
  /* Mobilde tam ekran hissi için border-radius mobilde kalkacak */
  border-radius: 24px;
  overflow: hidden;
  position: relative;
  display: flex;
  flex-direction: column;
  box-shadow: 0 0 0 10px #1a1a1a, 0 30px 60px rgba(0, 0, 0, 0.9);
  background: var(--bg-dark);
}

/* Mobil Cihazlar İçin Ayar */
@media (max-width: 500px) {
  body { display: block; background: #000; }
  #app {
    width: 100%;
    height: 100dvh; /* Dinamik yükseklik */
    max-width: none;
    max-height: none;
    border-radius: 0;
    box-shadow: none;
  }
}

/* --- ARKA PLAN RESMİ VE KARARTMA --- */
#heroImage {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: 0;
  transition: opacity 0.3s ease;
}

/* Yazıların okunması için daha güçlü bir perde */
#app::before {
  content: "";
  position: absolute;
  inset: 0;
  /* Üstte koyu, ortada hafif açık, altta tekrar koyu */
  background: linear-gradient(
    to bottom,
    rgba(0, 0, 0, 0.7) 0%,
    rgba(0, 0, 0, 0.2) 40%,
    rgba(0, 0, 0, 0.8) 100%
  );
  pointer-events: none;
  z-index: 1;
}

/* --- ÜST BAR (TOPBAR) --- */
#topbar {
  position: relative;
  z-index: 10;
  height: 70px;
  padding: 10px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-shrink: 0;
}

.brand-wrap {
  display: flex;
  flex-direction: column;
  gap: 2px;
  cursor: pointer;
  text-shadow: 0 2px 10px rgba(0,0,0,0.5);
}

.brand {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 22px;
  font-weight: 900;
  letter-spacing: -0.5px;
  color: #fff;
}

.brand i { color: var(--primary); font-size: 20px; }
.brand span { color: var(--primary); }

.brand-sub {
  font-size: 11px;
  font-weight: 700;
  color: rgba(255, 255, 255, 0.8);
  letter-spacing: 0.5px;
}

.top-actions { display: flex; gap: 12px; }

.menu-btn {
  width: 42px;
  height: 42px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  color: #fff;
  cursor: pointer;
  font-size: 18px;
  transition: 0.2s;
}
.menu-btn:active { transform: scale(0.95); background: rgba(255, 255, 255, 0.3); }

/* --- ORTA ALAN (HERO TEXT) --- */
#main {
  position: relative;
  z-index: 8;
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

#heroContent {
  position: absolute;
  pointer-events: none;
  padding: 0 24px;
  z-index: 9;
  transition: all 0.4s ease;
  width: 100%;
  top: 110px; /* Biraz aşağı aldım */
  left: 0;
}

#heroTitle {
  font-size: 40px;
  font-weight: 900;
  line-height: 1.05;
  color: #fff;
  letter-spacing: -1.5px;
  /* ÖNEMLİ: Yazının okunması için gölge */
  text-shadow: 0 4px 20px rgba(0, 0, 0, 0.9);
}

#heroDesc {
  margin-top: 14px;
  font-size: 17px;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.95);
  line-height: 1.4;
  text-shadow: 0 2px 10px rgba(0, 0, 0, 0.9);
  max-width: 85%;
}

/* --- CHAT ALANI --- */
#chatContainer {
  display: none;
  width: 100%;
  height: 100%;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  padding: 20px 20px 240px 20px; /* Alttan boşluk önemli */
  background: rgba(0, 0, 0, 0.5); /* Hafif karartma */
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-radius: 24px 24px 0 0;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  scrollbar-width: none;
}
#chatContainer::-webkit-scrollbar { display: none; }

body.fal-mode #chatContainer { padding-bottom: 420px; }

/* Mesaj Balonları */
.msg { display: flex; margin-bottom: 14px; animation: fadeIn 0.3s ease; flex-direction: column; }
.msg.user { align-items: flex-end; }
.msg.ai { align-items: flex-start; }
@keyframes fadeIn { from{opacity:0; transform:translateY(15px);} to{opacity:1; transform:translateY(0);} }

.bubble {
  max-width: 90%;
  padding: 14px 18px;
  border-radius: 20px;
  font-size: 15px;
  line-height: 1.5;
  font-weight: 600;
  position: relative;
  user-select: text;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}
.msg.user .bubble { background: var(--primary); color: #fff; border-bottom-right-radius: 4px; }
.msg.ai .bubble { background: #ffffff; color: #111; border-bottom-left-radius: 4px; }

.typing-cursor::after { content: '|'; animation: blink 1s infinite; margin-left: 2px; }
@keyframes blink { 50% { opacity: 0; } }

.audio-btn {
  margin-top: 6px; margin-left: 4px; display: inline-flex; align-items: center; gap: 8px;
  padding: 8px 14px; border-radius: 20px; background: #fff; color: var(--primary);
  font-size: 12px; font-weight: 800; cursor: pointer; box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  transition: transform 0.2s; width: fit-content;
}
.audio-btn.playing { background: #ffebee; color: #d32f2f; }
.audio-btn:active { transform: scale(0.95); }

/* --- ALIŞVERİŞ KARTLARI --- */
.cards { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 12px; padding-bottom: 10px; width: 100%; }
.card { background: #fff; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.1); position: relative; display: flex; flex-direction: column; min-height: 230px; }
.card-badge { position: absolute; top: 10px; left: 0; padding: 4px 10px; font-size: 10px; font-weight: 800; color: #fff; border-radius: 0 8px 8px 0; z-index: 2; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
.card-badge.gold { background: #FFA000; }
.card-badge.silver { background: #9E9E9E; }
.pimg { width: 100%; height: 130px; object-fit: contain; background: #fcfcfc; padding: 8px; border-bottom: 1px solid #f0f0f0; }
.card-body { padding: 12px; display: flex; flex-direction: column; flex: 1; }
.card .title { font-size: 12px; font-weight: 700; color: #222; line-height: 1.3; height: 32px; overflow: hidden; margin-bottom: 6px; }
.card .price { font-size: 15px; font-weight: 900; color: var(--primary); margin-bottom: 8px; }
.score-wrap { display: flex; justify-content: space-between; align-items: center; font-size: 10px; font-weight: 700; color: #666; margin-bottom: 10px; }
.score-pill { background: #f0f0f0; padding: 3px 8px; border-radius: 10px; color: #111; font-weight: 800; }
.btnLink { margin-top: auto; display: block; text-align: center; background: #111; color: #fff; padding: 10px; border-radius: 10px; text-decoration: none; font-size: 12px; font-weight: 800; transition: 0.2s; }
.btnLink:active { transform: scale(0.96); background: var(--primary); }

/* --- ALT BÖLÜM (BOTTOM) --- */
#bottom {
  position: absolute;
  bottom: 0; left: 0; right: 0;
  z-index: 20;
  background: var(--panel-bg);
  backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);
  border-top-left-radius: 28px;
  border-top-right-radius: 28px;
  padding: 15px 20px calc(env(safe-area-inset-bottom) + 20px) 20px;
  box-shadow: 0 -10px 40px rgba(0,0,0,0.2);
  transition: transform 0.3s ease;
}

#suggestionText {
  position: absolute; top: -18px; left: 50%; transform: translateX(-50%);
  background: #fff; color: var(--primary); padding: 6px 16px; border-radius: 20px;
  font-size: 12px; font-weight: 800; box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  white-space: nowrap; z-index: 25; pointer-events: none;
}

.input-wrapper { display: flex; align-items: center; gap: 10px; width: 100%; }

.search-bar {
  flex: 1; height: 54px; background: #fff; border-radius: 27px;
  display: flex; align-items: center; padding: 0 6px 0 18px;
  border: 1px solid #e0e0e0; transition: 0.3s; min-width: 0;
  box-shadow: 0 4px 12px rgba(0,0,0,0.04);
}
.search-bar:focus-within { border-color: var(--primary); box-shadow: 0 6px 15px rgba(0,0,0,0.08); }

#text { flex: 1; border: none; background: transparent; font-size: 16px; color: #222; outline: none; min-width: 0; }

.tool-btn {
  width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center;
  color: #999; font-size: 20px; cursor: pointer; transition: 0.2s;
}
.tool-btn:active { color: var(--primary); background: #f5f5f5; }

#sendBtn {
  width: 54px; height: 54px; border-radius: 50%; border: none;
  background: var(--primary); color: #fff; font-size: 22px; flex-shrink: 0;
  display: flex; align-items: center; justify-content: center; cursor: pointer;
  box-shadow: 0 8px 20px rgba(0,0,0,0.15); transition: 0.2s;
}
#sendBtn:active { transform: scale(0.94); }

/* --- DOCK (MENÜ) --- */
#dock {
  display: flex; gap: 20px; overflow-x: auto;
  padding: 18px 5px 5px 5px; scrollbar-width: none; cursor: grab;
}
#dock::-webkit-scrollbar { display: none; }

.dock-item {
  display: flex; flex-direction: column; align-items: center; gap: 6px;
  opacity: 0.5; transition: 0.3s; min-width: 60px;
}
.dock-item.active { opacity: 1; transform: translateY(-4px); }

.icon-box {
  width: 46px; height: 46px; border-radius: 16px; background: #eee;
  color: #666; display: flex; align-items: center; justify-content: center;
  font-size: 20px; transition: 0.3s;
}
.dock-item.active .icon-box {
  background: var(--primary); color: #fff;
  box-shadow: 0 6px 15px rgba(0,0,0,0.15);
}
.dock-label { font-size: 11px; font-weight: 800; color: #444; }

/* --- FOOTER --- */
.brand-footer {
  margin-top: 15px; display: flex; flex-direction: column; align-items: center;
  gap: 6px; width: fit-content; margin-left: auto; margin-right: auto;
  opacity: 0.8;
}
.footer-text-line1 { font-size: 12px; font-weight: 800; color: #36454F; }
.footer-text-line2 { font-size: 11px; font-weight: 600; color: #666; }
.oz-lines { display: flex; gap: 5px; height: 4px; width: 100%; }
.oz-lines span { height: 100%; flex: 1; border-radius: 2px; }
.oz-l-dynamic { background: var(--primary); }
.oz-l-red { background: #D32F2F; }
.oz-l-white { background: #fff; border: 1px solid #ccc; }
.oz-l-black { background: #222; }

/* --- MODALS --- */
.modal-overlay {
  position: absolute; inset: 0; z-index: 200; display: none;
  align-items: center; justify-content: center;
  background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(10px);
}
.modal-box {
  width: 88%; max-width: 360px; background: #fff;
  border-radius: 26px; padding: 24px;
  box-shadow: 0 20px 50px rgba(0,0,0,0.4); text-align: center;
}
.modal-title { font-size: 20px; font-weight: 900; margin-bottom: 12px; color: #111; }
.modal-desc { font-size: 14px; color: #555; line-height: 1.5; font-weight: 600; margin-bottom: 20px; }

/* Buton Stilleri */
.tab-btn { flex: 1; height: 44px; border-radius: 14px; font-weight: 800; cursor: pointer; font-size: 14px; transition: 0.2s; }
.tab-btn.active { border: none; background: var(--primary); color: #fff; }
.tab-btn:not(.active) { border: 1px solid #eee; background: #fff; color: #444; }

.form-input {
  width: 100%; height: 48px; border-radius: 16px; border: 2px solid #f0f0f0;
  padding: 0 16px; font-family: var(--font); font-size: 15px; font-weight: 600; outline: none;
  transition: 0.3s;
}
.form-input:focus { border-color: var(--primary); }

.action-btn {
  width: 100%; height: 50px; border-radius: 16px; border: none;
  background: var(--primary); color: #fff; font-weight: 900; font-size: 16px;
  cursor: pointer; box-shadow: 0 8px 20px rgba(0,0,0,0.15); transition: 0.2s;
}
.action-btn:active { transform: scale(0.97); }

.photoBtn {
  flex: 1; height: 46px; border-radius: 14px; font-weight: 800; cursor: pointer; font-size: 14px;
}

/* PERSONA SEÇİM */
#personaModal .persona-content { padding: 20px; }
.persona-opt {
  padding: 16px; border-radius: 18px; background: #f8f9fa;
  margin-bottom: 10px; font-weight: 800; cursor: pointer; transition: 0.2s;
  display: flex; align-items: center; justify-content: space-between; font-size: 14px;
  border: 2px solid transparent;
}
.persona-opt:active { transform: scale(0.98); }
.persona-opt.selected { border-color: var(--primary); background: #fff8e1; color: var(--primary); }
.persona-opt.locked { opacity: 0.6; filter: grayscale(100%); }

/* DRAWER */
#drawerMask { position: absolute; inset: 0; background: rgba(0,0,0,0.6); z-index: 50; display: none; }
#drawer {
  position: absolute; top: 0; right: 0; height: 100%; width: 280px;
  background: #fff; z-index: 60; padding: 25px;
  transform: translateX(100%); transition: transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
  box-shadow: -10px 0 30px rgba(0,0,0,0.1);
}
#drawer.open { transform: translateX(0); }
.drawer-item {
  padding: 16px 0; border-bottom: 1px solid #f0f0f0; cursor: pointer;
  font-weight: 700; font-size: 15px; color: #333; transition: 0.2s;
}
.drawer-item:active { color: var(--primary); padding-left: 5px; }
#fileInput { display: none; }

/* FAL MODU ÖZEL */
.fal-only { display: none; }
body.fal-mode #bottom .input-wrapper { display: none !important; }
body.fal-mode .fal-only { display: block; margin-bottom: 10px; }
.fal-cam-wrap { display: flex; justify-content: center; padding: 10px 0; }
.fal-cam-btn {
  width: 90px; height: 90px; border-radius: 30px; border: none;
  background: var(--primary); color: #fff; font-size: 36px;
  display: flex; align-items: center; justify-content: center;
  box-shadow: 0 15px 35px rgba(0,0,0,0.2); cursor: pointer; transition: 0.2s;
}
.fal-cam-btn:active { transform: scale(0.92); }
.fal-step-text { text-align: center; font-weight: 900; font-size: 13px; color: #222; }
.fal-step-sub { text-align: center; font-weight: 700; font-size: 11px; color: #666; margin-top: 4px; }

.chat-img { touch-action: none; -webkit-user-drag: none; user-select: none; }

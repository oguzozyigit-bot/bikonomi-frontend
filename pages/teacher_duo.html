<!-- FILE: /pages/teacher_duo.html -->
<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
  <title>Duo Practice</title>
  <link rel="icon" href="data:,"/>

  <style>
    *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
    html,body{margin:0;height:100dvh;overflow:hidden;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial}
    body{background:#070812;color:#fff}

    .wrap{width:100%;max-width:480px;height:100%;margin:0 auto;position:relative}

    .back{
      position:absolute;top:12px;left:12px;z-index:20;
      width:46px;height:46px;border-radius:16px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(0,0,0,.35);color:#fff;
      font-size:22px;font-weight:1000;
      display:flex;align-items:center;justify-content:center;
      backdrop-filter: blur(10px);
      box-shadow: 0 18px 40px rgba(0,0,0,.45);
      user-select:none;
    }
    .back:active{transform:translateY(1px)}

    .pill{
      position:absolute; top:12px; right:12px; z-index:20;
      padding:10px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(0,0,0,.35);
      font-weight:950;
      font-size:12px;
      backdrop-filter: blur(10px);
      box-shadow:0 18px 40px rgba(0,0,0,.35);
      max-width:62vw;
      overflow:hidden;
      white-space:nowrap;
      text-overflow:ellipsis;
    }

    /* Layout: √úST = Oyuncu B (ters) / ORTA = dalga / ALT = Oyuncu A (d√ºz) */
    .grid{
      position:absolute; inset:0;
      display:grid;
      grid-template-rows: 1fr 86px 1fr;
      gap:10px;
      padding:70px 12px 14px;
    }

    .pane{
      border-radius:26px;
      border:1px solid rgba(255,255,255,.12);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      box-shadow:0 28px 90px rgba(0,0,0,.6);
      backdrop-filter: blur(10px);
      position:relative;
    }

    /* √úST: Kar≈üƒ± taraf (B) ‚Äì 180¬∞ */
    .top{
      background:
        radial-gradient(900px 360px at 20% 0%, rgba(40,120,255,.22), transparent 62%),
        rgba(0,0,0,.18);
      transform: rotate(180deg);
    }

    /* ALT: Sana bakan (A) ‚Äì d√ºz */
    .bottom{
      background:
        radial-gradient(900px 360px at 20% 0%, rgba(120,20,35,.72), transparent 64%),
        rgba(0,0,0,.18);
    }

    .bar{
      padding:12px;
      border-bottom:1px solid rgba(255,255,255,.10);
      display:flex; justify-content:space-between; align-items:center;
      background:rgba(0,0,0,.18);
      font-weight:1000;
    }
    .name{opacity:.95}
    .score{opacity:.85}

    .body{padding:16px;display:flex;flex-direction:column;gap:10px}
    .word{font-size:30px;font-weight:1000;letter-spacing:.2px}
    .hint{opacity:.82;font-weight:900;font-size:12px;line-height:1.35}

    .btnrow{
      padding:14px;
      display:flex;
      justify-content:center;
      gap:10px;
    }
    .btn{
      border:none;
      border-radius:18px;
      padding:12px 14px;
      font-weight:1000;
      background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.12);
      color:#fff;
      min-width:140px;
      user-select:none;
      cursor:pointer;
      box-shadow: 0 14px 30px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.14);
    }
    .btn.primary{
      background:rgba(190,242,100,.16);
      border-color:rgba(190,242,100,.28);
      box-shadow: 0 14px 30px rgba(190,242,100,.10), inset 0 1px 0 rgba(255,255,255,.14);
    }
    .btn:active{transform:translateY(1px)}
    .btn[disabled]{opacity:.55;cursor:not-allowed;transform:none}

    /* Orta dalga */
    .wave{
      border-radius:22px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.26);
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      position:relative;
      overflow:hidden;
      backdrop-filter: blur(10px);
      box-shadow:0 22px 70px rgba(0,0,0,.55);
    }
    .wave .label{
      font-weight:1000;
      font-size:12px;
      opacity:.86;
      letter-spacing:.2px;
      user-select:none;
    }
    .bars{
      display:flex;
      align-items:center;
      gap:6px;
      height:34px;
    }
    .barw{
      width:6px;
      height:10px;
      border-radius:99px;
      background: rgba(255,255,255,.22);
      transform-origin:center;
    }

    /* Dalga animasyonu: √∂ƒüretmen okurken YE≈ûƒ∞L */
    .wave.teaching .barw{
      background: rgba(190,242,100,.75);
      box-shadow: 0 0 18px rgba(190,242,100,.18);
      animation: w 650ms ease-in-out infinite;
    }
    .wave.teaching .barw:nth-child(2){animation-delay:.06s}
    .wave.teaching .barw:nth-child(3){animation-delay:.12s}
    .wave.teaching .barw:nth-child(4){animation-delay:.18s}
    .wave.teaching .barw:nth-child(5){animation-delay:.24s}
    .wave.teaching .barw:nth-child(6){animation-delay:.30s}
    .wave.teaching .barw:nth-child(7){animation-delay:.36s}

    /* √ñƒürenci dinlerken (mic a√ßƒ±kken) biraz daha koyu ye≈üil */
    .wave.listening .barw{
      background: rgba(190,242,100,.55);
      animation: w 560ms ease-in-out infinite;
    }

    @keyframes w{
      0%{ height:10px; opacity:.55 }
      45%{ height:34px; opacity:1 }
      100%{ height:12px; opacity:.65 }
    }

    /* Sonu√ß rozetleri (sadece o tarafta g√∂r√ºn√ºr) */
    .badge{
      position:absolute;
      right:14px;
      bottom:14px;
      padding:10px 12px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(0,0,0,.35);
      font-weight:1000;
      font-size:13px;
      display:none;
      align-items:center;
      gap:10px;
      backdrop-filter: blur(10px);
      box-shadow: 0 18px 40px rgba(0,0,0,.45);
      max-width: 80%;
      user-select:none;
    }
    .badge.show{ display:inline-flex; }

    .badge.ok{
      border-color: rgba(190,242,100,.25);
    }
    .badge.bad{
      border-color: rgba(255,82,82,.25);
    }
    .badge .ico{
      width:26px;height:26px;border-radius:12px;
      display:flex;align-items:center;justify-content:center;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.06);
      font-size:16px;
    }
    .badge.ok .ico{ background: rgba(190,242,100,.14); }
    .badge.bad .ico{ background: rgba(255,82,82,.14); }

    /* Toast */
    .toast{
      position: fixed;
      left: 50%;
      top: 14px;
      transform: translateX(-50%);
      z-index: 99999;
      padding: 10px 14px;
      border-radius: 999px;
      font-weight: 1000;
      font-size: 12px;
      background: rgba(20,20,20,.92);
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: 0 18px 40px rgba(0,0,0,.45);
      backdrop-filter: blur(10px);
      display:none;
      color: rgba(255,255,255,.92);
      max-width: min(480px, calc(100vw - 24px));
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }
    .toast.show{ display:block; }
  </style>
</head>

<body>
<div class="wrap">
  <button class="back" id="backBtn">‚Üê</button>
  <div class="pill" id="langPill">üÜö Duo Practice</div>

  <div class="grid">

    <!-- √úST: Oyuncu B (ters) -->
    <section class="pane top" id="paneB">
      <div class="bar">
        <div class="name" id="nameB">Oyuncu B</div>
        <div class="score" id="scoreB">0</div>
      </div>
      <div class="body">
        <div class="word" id="wordB">‚Äî</div>
        <div class="hint" id="hintB">Sƒ±ra sende deƒüil.</div>
      </div>
      <div class="btnrow">
        <button class="btn primary" id="micB">S√∂yle</button>
      </div>

      <div class="badge" id="badgeB">
        <div class="ico" id="badgeIcoB">‚úÖ</div>
        <div class="txt" id="badgeTxtB">Nice!</div>
      </div>
    </section>

    <!-- ORTA: Ses dalgasƒ± -->
    <div class="wave" id="waveBox">
      <div class="label" id="waveLabel">√ñƒüretmen okuyor‚Ä¶</div>
      <div class="bars" aria-hidden="true">
        <div class="barw"></div><div class="barw"></div><div class="barw"></div><div class="barw"></div>
        <div class="barw"></div><div class="barw"></div><div class="barw"></div>
      </div>
    </div>

    <!-- ALT: Oyuncu A (d√ºz, sana bakan) -->
    <section class="pane bottom" id="paneA">
      <div class="bar">
        <div class="name" id="nameA">Oyuncu A</div>
        <div class="score" id="scoreA">0</div>
      </div>
      <div class="body">
        <div class="word" id="wordA">‚Äî</div>
        <div class="hint" id="hintA">Sƒ±ran sende. Tek hak.</div>
      </div>
      <div class="btnrow">
        <button class="btn primary" id="micA">S√∂yle</button>
      </div>

      <div class="badge" id="badgeA">
        <div class="ico" id="badgeIcoA">‚úÖ</div>
        <div class="txt" id="badgeTxtA">Nice!</div>
      </div>
    </section>

  </div>
</div>

<div class="toast" id="toast">‚Äî</div>
<script type="module" src="/js/teacher_duo.js?v=3"></script>
</body>
</html>
